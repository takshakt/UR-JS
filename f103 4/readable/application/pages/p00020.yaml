---
# ====== Page: Add Events ====================================
id: 20
identification: 
  name: Add Events
  alias: ADD-EVENTS
  title: Add Events

appearance: 
  page-mode: Modal Dialog
  dialog-template: Theme Default
  template-options: 
  - '#DEFAULT#'

dialog: 
  chained: true
  resizable: true

navigation-menu: 
  override-user-interface-level: false

navigation: 
  cursor-focus: Do not focus cursor
  warn-on-unsaved-changes: true

javascript: 
  file-urls: 
  - 'https://cdn.jsdelivr.net/npm/flatpickr'

security: 
  authentication: Page Requires Authentication
  deep-linking: Application Default
  page-access-protection: Arguments Must Have Checksum
  form-auto-complete: Off
  browser-cache: Application Default

session-management: 
  rejoin-sessions: Application Default

advanced: 
  enable-duplicate-page-submissions: Yes - Enable page to be re-posted
  reload-on-submit: Only for Success

server-cache: 
  caching: Disabled

regions: 
- # ====== Region: New Event ===================================
  id: 12890890599500105
  identification: 
    name: New Event
    type: Static Content

  layout: 
    sequence: 20
    parent-region: No Parent
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

page-items: 
- # ====== Page Item: P20_EVENT_NAME ===========================
  id: 12890992303500106
  identification: 
    name: P20_EVENT_NAME
    type: Text Field

  label: 
    label: Event Name
    alignment: Left

  settings: 
    subtype: Text
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 50
    region: New Event # 12890890599500105
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Required - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P20_EVENT_TYPE ===========================
  id: 12891016587500107
  identification: 
    name: P20_EVENT_TYPE
    type: Popup LOV

  label: 
    label: Event Type
    alignment: Left

  settings: 
    display-as: Inline Popup
    initial-fetch: Automatic
    manual-entry: false
    fetch-on-search: false

  search: 
    match-type: Contains
    case-sensitive: false
    minimum-characters: 0

  multiple-values: 
    type: No

  layout: 
    sequence: 60
    region: New Event # 12890890599500105
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Required - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  list-of-values: 
    type: Shared Component
    list-of-values: UR EVENT TYPES # 12921639157580743
    display-extra-values: true
    display-null-value: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P20_EVENT_DESRIPTION =====================
  id: 12891178734500108
  identification: 
    name: P20_EVENT_DESRIPTION
    type: Text Field

  label: 
    label: Event Description
    alignment: Left

  settings: 
    subtype: Text
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 70
    region: New Event # 12890890599500105
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P20_START_DATE ===========================
  id: 12891372949500110
  identification: 
    name: P20_START_DATE
    type: Date Picker

  label: 
    label: Start Date
    alignment: Left

  settings: 
    show-time: false
    display-as: Popup
    minimum-date: None
    maximum-date: None
    multiple-months: No
    use-defaults: true

  layout: 
    sequence: 90
    region: New Event # 12890890599500105
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Required - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P20_FREQUENCY ============================
  id: 12891418147500111
  identification: 
    name: P20_FREQUENCY
    type: Select List

  label: 
    label: Frequency
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 110
    region: New Event # 12890890599500105
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: false

  list-of-values: 
    type: Static Values
    static-values: 'STATIC2:One time event;One time event,Monthly;Monthly,Quarterly;Quarterly,Annually;Annually'
    display-extra-values: false
    display-null-value: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P20_ATTENDANCE ===========================
  id: 12891532903500112
  identification: 
    name: P20_ATTENDANCE
    type: Select List

  label: 
    label: Attendance
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 120
    region: New Event # 12890890599500105
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: false

  list-of-values: 
    type: Static Values
    static-values: 'STATIC:Less than 10;10,Less than 100;100,Less than 1000;1000,More than 1000;1100'
    display-extra-values: false
    display-null-value: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Database Column
    database-column: ESTIMATED_ATTENDANCE
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P20_POST_CODE ============================
  id: 12891634683500113
  identification: 
    name: P20_POST_CODE
    type: Text Field

  label: 
    label: Post Code
    alignment: Left

  settings: 
    subtype: Text
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 160
    region: New Event # 12890890599500105
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P20_CITY =================================
  id: 12891757533500114
  identification: 
    name: P20_CITY
    type: Text Field

  label: 
    label: City
    alignment: Left

  settings: 
    subtype: Text
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 170
    region: New Event # 12890890599500105
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: P20_COUNTRY ==============================
  id: 12891849823500115
  identification: 
    name: P20_COUNTRY
    type: Text Field

  label: 
    label: Country
    alignment: Left

  settings: 
    subtype: Text
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 180
    region: New Event # 12890890599500105
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

- # ====== Page Item: P20_END_DATE =============================
  id: 12892135703500118
  identification: 
    name: P20_END_DATE
    type: Date Picker

  label: 
    label: End Date
    alignment: Left

  settings: 
    show-time: false
    display-as: Popup
    minimum-date: Item
    minimum-item: P20_START_DATE
    maximum-date: None
    multiple-months: No
    use-defaults: true

  layout: 
    sequence: 100
    region: New Event # 12890890599500105
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P20_IMPACT_TYPE ==========================
  id: 12893293664500129
  identification: 
    name: P20_IMPACT_TYPE
    type: Select List

  label: 
    label: Impact Type
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 140
    region: New Event # 12890890599500105
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: false

  list-of-values: 
    type: Static Values
    static-values: 'STATIC2:Positive;+1,Negative;-1'
    display-extra-values: false
    display-null-value: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P20_IMPACT_LEVEL =========================
  id: 12893357573500130
  identification: 
    name: P20_IMPACT_LEVEL
    type: Select List

  label: 
    label: Impact Level
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 150
    region: New Event # 12890890599500105
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: false

  list-of-values: 
    type: Static Values
    static-values: 'STATIC2:Low;1,Medium;2,High;3'
    display-extra-values: false
    display-null-value: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  default: 
    type: Static
    static-value: Medium

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P20_DATE_RANGE ===========================
  id: 12893403683500131
  identification: 
    name: P20_DATE_RANGE
    type: Text Field

  label: 
    label: Date Range
    alignment: Left

  settings: 
    subtype: Text
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 80
    region: New Event # 12890890599500105
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30
    value-placeholder: Start to End Date

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

  configuration: 
    build-option: Commented Out # 8557885664922129

- # ====== Page Item: P20_HOTEL_ID =============================
  id: 12894173291500138
  identification: 
    name: P20_HOTEL_ID
    type: Select List

  label: 
    label: Hotel Name
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 10
    region: New Event # 12890890599500105
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: false

  list-of-values: 
    type: SQL Query
    sql-query: |
      SELECT DISPLAY_VALUE, RETURN_VALUE FROM (
        SELECT HOTEL_NAME AS DISPLAY_VALUE,
               RAWTOHEX(ID) AS RETURN_VALUE
          FROM UR_HOTELS
          WHERE nvl(ASSOCIATION_END_DATE,sysdate) >= sysdate
      
        UNION ALL
        SELECT '-- Select Hotel  --' AS DISPLAY_VALUE,
               NULL AS RETURN_VALUE
          FROM DUAL
      )
      ORDER BY  DISPLAY_VALUE
    display-extra-values: false
    display-null-value: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Database Column
    database-column: HOTEL_ID
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P20_EVENT_ID =============================
  id: 12895164421500148
  identification: 
    name: P20_EVENT_ID
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 40
    region: New Event # 12890890599500105
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Database Column
    database-column: ID
    used: Always, replacing any existing value in session state

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P20_HOTEL_EVENT_LIST =====================
  id: 13478669877370108
  identification: 
    name: P20_HOTEL_EVENT_LIST
    type: Select List

  label: 
    label: Events
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 30
    region: New Event # 12890890599500105
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: false

  list-of-values: 
    type: SQL Query
    sql-query: |
      SELECT DISPLAY_VALUE, RETURN_VALUE
      FROM (
        -- New event option (always first)
        SELECT '-- Define New Event --' AS DISPLAY_VALUE,
               '00000000000000000000000000000000' AS RETURN_VALUE,
               0 AS sort_order
        FROM dual
      
        UNION ALL
      
        -- Events list filtered by hotel (or common events)
        SELECT EVENT_NAME AS DISPLAY_VALUE,
               RAWTOHEX(ID) AS RETURN_VALUE,
               1 AS sort_order
          FROM UR_EVENTS,
          (SELECT :P20_HOTEL_ID AS P20_HOTEL_ID_VAL FROM dual) param
         WHERE
           (param.P20_HOTEL_ID_VAL = 'COMMON_EVENTS' AND HOTEL_ID IS NULL)
           OR
           (param.P20_HOTEL_ID_VAL <> 'COMMON_EVENTS'
            AND HOTEL_ID = CASE
                             WHEN REGEXP_LIKE(param.P20_HOTEL_ID_VAL, '^[0-9A-Fa-f]{32}$')
                             THEN HEXTORAW(param.P20_HOTEL_ID_VAL)
                             ELSE NULL
                          END)
      )
      ORDER BY sort_order, DISPLAY_VALUE
    display-extra-values: false
    display-null-value: false

  cascading-list-of-values: 
    parent-item(s): 
    - P20_HOTEL_ID
    items-to-submit: 
    - P20_HOTEL_ID
    parent-required: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Database Column
    database-column: ID
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P20_ATTENDANCE_TEST ======================
  id: 22839823486924807
  identification: 
    name: P20_ATTENDANCE_TEST
    type: Display Only

  label: 
    label: Attendance Test
    alignment: Left

  settings: 
    format: Plain Text
    based-on: Item Value
    show-line-breaks: true
    send-on-page-submit: true

  layout: 
    sequence: 130
    region: New Event # 12890890599500105
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'

  list-of-values: 
    type: SQL Query
    sql-query: |
      SELECT '≤ 10' AS display_value, '≤ 10' AS return_value FROM DUAL
      UNION ALL
      SELECT '≤ 100', '≤ 100' FROM DUAL
      UNION ALL
      SELECT '≤ 1000', '≤ 1000' FROM DUAL
      UNION ALL
      SELECT 'More than 1000', 'More than 1000' FROM DUAL
    display-extra-values: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Database Column
    database-column: ESTIMATED_ATTENDANCE
    used: Always, replacing any existing value in session state

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

  configuration: 
    build-option: Commented Out # 8557885664922129

buttons: 
- # ====== Button: Delete ======================================
  id: 12891972758500116
  identification: 
    button-name: Delete
    label: Delete

  layout: 
    sequence: 20
    region: New Event # 12890890599500105
    slot: CLOSE
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--danger

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: false
    database-action: SQL DELETE action

- # ====== Button: SAVE ========================================
  id: 12892093694500117
  identification: 
    button-name: SAVE
    label: Save

  layout: 
    sequence: 10
    region: New Event # 12890890599500105
    slot: CREATE
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text
    hot: true
    template-options: 
    - '#DEFAULT#'

  behavior: 
    action: Submit Page
    execute-validations: true
    show-processing: false
    warn-on-unsaved-changes: Do Not Check
    database-action: SQL INSERT action

- # ====== Button: CANCEL ======================================
  id: 23205449817797502
  identification: 
    button-name: CANCEL
    label: Cancel

  layout: 
    sequence: 10
    region: New Event # 12890890599500105
    slot: CLOSE
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text
    hot: false
    template-options: 
    - '#DEFAULT#'

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: true

dynamic-actions: 
- # ====== Dynamic Action: Postcode lookup =====================
  id: 12893013250500127
  identification: 
    name: Postcode lookup

  execution: 
    sequence: 10
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P20_POST_CODE

  actions: 
  - # ====== Action: Execute Server-side Code ====================
    id: 12893178106500128
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        DECLARE
          l_response CLOB;
          l_pc       VARCHAR2(200);
          l_city     VARCHAR2(4000);
          l_country  VARCHAR2(200);
          l_tmp      VARCHAR2(4000);
          l_status_n NUMBER := NULL;
        
          TYPE t_path_tab IS TABLE OF VARCHAR2(200);
          l_paths t_path_tab := t_path_tab(
            'result.post_town',
            'result.admin_district',
            'result.parish',
            'result.region',
            'result.admin_county',
            'result.admin_ward',
            'result.outcode',
            'result.incode'
          );
        BEGIN
          :P20_CITY := NULL;
          :P20_COUNTRY := NULL;
        
          l_pc := TRIM(:P20_POST_CODE);
          IF l_pc IS NULL THEN
            RETURN;
          END IF;
        
          l_pc := UPPER(REPLACE(l_pc, ' ', ''));
        
          l_response := APEX_WEB_SERVICE.MAKE_REST_REQUEST(
                          p_url         => 'https://api.postcodes.io/postcodes/' || l_pc,
                          p_http_method => 'GET'
                        );
        
        
          APEX_DEBUG.MESSAGE('Postcodes.io raw response: ' || SUBSTR(l_response,1,32000));
        
          -- Parse JSON
          APEX_JSON.parse(l_response);
        
          -- Read numeric status (200 = success)
          BEGIN
            l_status_n := APEX_JSON.get_number(p_path => 'status');
          EXCEPTION WHEN OTHERS THEN
            l_status_n := NULL;
          END;
        
          IF l_status_n = 200 THEN
            -- read country
            BEGIN
              l_country := APEX_JSON.get_varchar2(p_path => 'result.country');
            EXCEPTION WHEN OTHERS THEN
              l_country := NULL;
            END;
        
            -- pick the best city-like field in order
            FOR i IN 1 .. l_paths.COUNT LOOP
              BEGIN
                l_tmp := APEX_JSON.get_varchar2(p_path => l_paths(i));
              EXCEPTION WHEN OTHERS THEN
                l_tmp := NULL;
              END;
        
              APEX_DEBUG.MESSAGE('Candidate ' || l_paths(i) || ' => ' || NVL(l_tmp,'<null>'));
        
              IF l_tmp IS NOT NULL THEN
                l_city := l_tmp;
                EXIT;
              END IF;
            END LOOP;
        
            -- Normalize chosen city
            IF l_city IS NOT NULL THEN
              l_city := TRIM(l_city);
              BEGIN
                l_city := INITCAP(LOWER(l_city));
              EXCEPTION WHEN OTHERS THEN
                NULL;
              END;
            END IF;
        
            :P20_CITY := l_city;
            :P20_COUNTRY := l_country;
            APEX_DEBUG.MESSAGE('Final chosen city: ' || NVL(l_city,'<null>') || ' | country: ' || NVL(l_country,'<null>'));
        
          ELSE
            -- no match or not found
            :P20_CITY := NULL;
            :P20_COUNTRY := NULL;
            APEX_DEBUG.MESSAGE('Postcodes.io returned status ' || NVL(TO_CHAR(l_status_n),'<null>') || ' for ' || :P20_POST_CODE);
          END IF;
        
        EXCEPTION
          WHEN OTHERS THEN
            :P20_CITY := NULL;
            :P20_COUNTRY := NULL;
            APEX_DEBUG.MESSAGE('Postcode lookup error: ' || SQLERRM);
            IF l_response IS NOT NULL THEN
              APEX_DEBUG.MESSAGE('Raw response (error): ' || SUBSTR(l_response,1,32000));
            END IF;
        END;
        
      items-to-submit: 
      - P20_POST_CODE
      items-to-return: 
      - P20_CITY
      - P20_COUNTRY
      suppress-change-event: false

    execution: 
      sequence: 10
      event: Postcode lookup # 12893013250500127
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

- # ====== Dynamic Action: Delete row DA =======================
  id: 12895224144500149
  identification: 
    name: Delete row DA

  execution: 
    sequence: 20
    event-scope: Static
    type: Immediate

  when: 
    event: Click
    selection-type: Button
    button: Delete # 12891972758500116

  actions: 
  - # ====== Action: Execute Server-side Code ====================
    id: 12895391618500150
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        BEGIN
          DELETE FROM UR_EVENTS WHERE ID = :P20_EVENT_ID;
          COMMIT;
          :P0_ALERT_MESSAGE := 'Record deleted successfully';
        EXCEPTION
          WHEN OTHERS THEN
            :P0_ALERT_MESSAGE := 'Deletion failed: ' || SQLERRM;
            RAISE;
        END;

    execution: 
      sequence: 10
      event: Delete row DA # 12895224144500149
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: Submit Page =================================
    id: 13478008436370102
    identification: 
      action: Submit Page

    settings: 
      request-/-button-name: Delete
      show-processing: true

    execution: 
      sequence: 20
      event: Delete row DA # 12895224144500149
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: change event list ===================
  id: 13478338372370105
  identification: 
    name: change event list

  execution: 
    sequence: 30
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P20_HOTEL_ID

  actions: 
  - # ====== Action: Refresh =====================================
    id: 13478846339370110
    identification: 
      action: Refresh

    settings: 
      maintain-pagination: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P20_HOTEL_EVENT_LIST

    execution: 
      sequence: 20
      event: change event list # 13478338372370105
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Set Value ===================================
    id: 13478938180370111
    identification: 
      action: Set Value

    settings: 
      set-type: Static Assignment
      suppress-change-event: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P20_HOTEL_EVENT_LIST

    execution: 
      sequence: 10
      event: change event list # 13478338372370105
      fire-when-event-result-is: True
      fire-on-initialization: true
      stop-execution-on-error: true
      wait-for-result: true

- # ====== Dynamic Action: Populate data and define new ========
  id: 13479059310370112
  identification: 
    name: Populate data and define new

  execution: 
    sequence: 40
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P20_HOTEL_EVENT_LIST

  client-side-condition: 
    type: Item is not in list
    item: P20_HOTEL_EVENT_LIST
    list: 
    - 00000000000000000000000000000000

  actions: 
  - # ====== Action: Set Value ===================================
    id: 13479161863370113
    identification: 
      action: Set Value

    settings: 
      set-type: SQL Statement
      sql-statement: |
        SELECT EVENT_NAME,
               EVENT_TYPE,
               DESCRIPTION,
          TO_CHAR(EVENT_START_DATE, 'MM-DD-YYYY') AS EVENT_START_DATE,
          TO_CHAR(EVENT_END_DATE,   'MM-DD-YYYY') AS EVENT_END_DATE,
               --TO_CHAR(EVENT_START_DATE, 'YYYY-MM-DD') || ' to ' || TO_CHAR(EVENT_END_DATE, 'YYYY-MM-DD') AS DATE_RANGE,
               EVENT_FREQUENCY,
               ESTIMATED_ATTENDANCE,
               IMPACT_TYPE,
               IMPACT_LEVEL,
               POSTCODE,
               CITY,
               COUNTRY
          FROM UR_EVENTS
         WHERE ID = HEXTORAW(:P20_HOTEL_EVENT_LIST)
        
      items-to-submit: 
      - P20_HOTEL_EVENT_LIST
      escape-special-characters: true
      suppress-change-event: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P20_EVENT_NAME
      - ' P20_EVENT_TYPE'
      - ' P20_EVENT_DESRIPTION'
      - ' P20_START_DATE'
      - ' P20_END_DATE'
      - ' P20_FREQUENCY'
      - ' P20_ATTENDANCE'
      - ' P20_IMPACT_TYPE'
      - ' P20_IMPACT_LEVEL'
      - ' P20_POST_CODE'
      - ' P20_CITY'
      - ' P20_COUNTRY'

    execution: 
      sequence: 10
      event: Populate data and define new # 13479059310370112
      fire-when-event-result-is: True
      fire-on-initialization: true
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: Execute Server-side Code ====================
    id: 13479431543370116
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        DECLARE
            l_new_event_id RAW(16);
        BEGIN
            IF :P20_HOTEL_EVENT_LIST = '00000000000000000000000000000000' THEN
                l_new_event_id := SYS_GUID();
        
                INSERT INTO UR_EVENTS (
                    ID,
                    HOTEL_ID,
                    EVENT_NAME,
                    EVENT_TYPE,
                    EVENT_START_DATE,
                    EVENT_END_DATE,
                    ESTIMATED_ATTENDANCE,
                    IMPACT_LEVEL,
                    IMPACT_TYPE,
                    DESCRIPTION,
                    CITY,
                    POSTCODE,
                    COUNTRY,
                    CREATED_BY,
                    UPDATED_BY,
                    CREATED_ON,
                    UPDATED_ON
                ) VALUES (
                    l_new_event_id,
                    HEXTORAW(:P20_HOTEL_ID),
                    'NEW EVENT',
                    'TEMP TYPE',
                    SYSDATE,
                    SYSDATE,
                    NULL,
                    NULL,
                    NULL,
                    NULL,
                    NULL,
                    NULL,
                    NULL,
                    HEXTORAW(:APP_USER_ID), -- assuming user id hex string bind
                    HEXTORAW(:APP_USER_ID),
                    SYSDATE,
                    SYSDATE
                );
        
                :P20_HOTEL_EVENT_LIST := RAWTOHEX(l_new_event_id);
            END IF;
        END;
      items-to-submit: 
      - P20_HOTEL_ID
      - P20_HOTEL_EVENT_LIST
      items-to-return: 
      - P20_HOTEL_EVENT_LIST
      suppress-change-event: false

    execution: 
      sequence: 20
      event: Populate data and define new # 13479059310370112
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

    client-side-condition: 
      type: Item = Value
      item: P20_HOTEL_EVENT_LIST
      value: NEW

- # ====== Dynamic Action: Cancel Dialog =======================
  id: 23205565503797503
  identification: 
    name: Cancel Dialog

  execution: 
    sequence: 50
    event-scope: Static
    type: Immediate

  when: 
    event: Click
    selection-type: Button
    button: CANCEL # 23205449817797502

  actions: 
  - # ====== Action: Cancel Dialog ===============================
    id: 23205613385797504
    identification: 
      action: Cancel Dialog

    execution: 
      sequence: 10
      event: Cancel Dialog # 23205565503797503
      fire-when-event-result-is: True
      fire-on-initialization: false

processes: 
- # ====== Process: test temp Insert proces_1 ==================
  id: 12893801393500135
  identification: 
    name: test temp Insert proces_1
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      DECLARE
        l_status        VARCHAR2(10);
        l_message       CLOB;
        l_icon          VARCHAR2(50);
        l_title         VARCHAR2(100);
        l_new_id        VARCHAR2(64) := NULL;
        l_payload       CLOB;
        l_json_clob     CLOB := NULL;
      
        l_start_date     VARCHAR2(10);
        l_end_date       VARCHAR2(10);
        l_pos            PLS_INTEGER;
        l_attendance_raw VARCHAR2(50) := :P20_ATTENDANCE;
        l_attendance_num NUMBER;
      BEGIN
        -- Parse date range
        l_pos := INSTR(:P20_DATE_RANGE, ' to ');
        IF l_pos > 0 THEN
          l_start_date := SUBSTR(:P20_DATE_RANGE, 1, l_pos - 1);
          l_end_date   := SUBSTR(:P20_DATE_RANGE, l_pos + 4);
        ELSE
          l_start_date := :P20_DATE_RANGE;
          l_end_date   := :P20_DATE_RANGE;
        END IF;
      
        l_attendance_raw := REGEXP_REPLACE(l_attendance_raw, '[^0-9]', '');
        BEGIN
          l_attendance_num := TO_NUMBER(l_attendance_raw);
        EXCEPTION
          WHEN VALUE_ERROR THEN
            l_attendance_num := NULL;
        END;
      
        -- Construct JSON payload for insertion (could be used if hooking to proc_crud_json later)
        l_payload := '{"HOTEL_ID":"' || RAWTOHEX(SYS_GUID()) || '",
                      "EVENT_NAME":"' || :P20_EVENT_NAME || '",
                      "EVENT_TYPE":"' || :P20_EVENT_TYPE || '",
                      "EVENT_START_DATE":"' || l_start_date || '",
                      "EVENT_END_DATE":"' || l_end_date || '",
                      "ESTIMATED_ATTENDANCE":"' || NVL(l_attendance_num, '') || '",
                      "IMPACT_LEVEL":"' || :P20_IMPACT_LEVEL || '",
                      "DESCRIPTION":"' || :P20_EVENT_DESRIPTION || '",
                      "CITY":"' || :P20_CITY || '",
                      "POSTCODE":"' || :P20_POST_CODE || '"}';
      
        -- Perform direct insert
        INSERT INTO UR_EVENTS (
          HOTEL_ID,
          EVENT_NAME,
          EVENT_TYPE,
          EVENT_START_DATE,
          EVENT_END_DATE,
          ESTIMATED_ATTENDANCE,
          IMPACT_LEVEL,
          DESCRIPTION,
          CITY,
          POSTCODE,
          COUNTRY,
          CREATED_BY,
          UPDATED_BY,
          CREATED_ON,
          UPDATED_ON
        ) VALUES (
          :P20_HOTEL_ID,             --SYS_GUID(),          
          :P20_EVENT_NAME,
          :P20_EVENT_TYPE,
          TO_DATE(l_start_date, 'MM-DD-YYYY'),
          TO_DATE(l_end_date, 'MM-DD-YYYY'),
          l_attendance_num,
          :P20_IMPACT_LEVEL,
          :P20_EVENT_DESRIPTION,
          :P20_CITY,
          :P20_POST_CODE,
          :P20_COUNTRY,
          SYS_GUID(),          -- Replace with current user id
          SYS_GUID(),
          SYSDATE,
          SYSDATE
        );
      
        COMMIT;
      
        -- Set success alert message
        l_status := 'S';
        l_message := 'Event "' || :P20_EVENT_NAME || '" created successfully.';
        UR_UTILS.add_alert(l_json_clob, l_message, l_status, null, null, l_json_clob);
      
      EXCEPTION
        WHEN OTHERS THEN
          l_status := 'E';
          l_message := 'Insert failed: ' || SQLERRM;
          UR_UTILS.add_alert(l_json_clob, l_message, l_status, null, null, l_json_clob);
          :P0_ALERT_MESSAGE := l_json_clob;   
          RAISE;
      END;
      

  execution: 
    sequence: 30
    point: Processing
    run-process: Once Per Page Visit (default)

  error: 
    display-location: Inline in Notification

  server-side-condition: 
    when-button-pressed: SAVE # 12892093694500117

  configuration: 
    build-option: Commented Out # 8557885664922129

- # ====== Process: Close Dialog ===============================
  id: 12893917364500136
  identification: 
    name: Close Dialog
    type: Close Dialog
    execution-chain: None

  settings: 
    items-to-return-: 
    - P0_ALERT_MESSAGE
    show-success-messages: true

  execution: 
    sequence: 60
    point: Processing
    run-process: Once Per Page Visit (default)

  success-message: 
    success-message: Data Updated!

  error: 
    display-location: Inline in Notification

- # ====== Process: test temp Insert proces_1_1 ================
  id: 13478108673370103
  identification: 
    name: test temp Insert proces_1_1
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      DECLARE
        l_status        VARCHAR2(10);
        l_message       CLOB;
        l_json_clob     CLOB := NULL;
        l_attendance_raw VARCHAR2(50) := :P20_ATTENDANCE;
        l_attendance_num NUMBER;
        l_start_date     VARCHAR2(10);
        l_end_date       VARCHAR2(10);
        l_pos            PLS_INTEGER;
      BEGIN
      
        -- Parse Date Range as you had before
        l_pos := INSTR(:P20_DATE_RANGE, ' to ');
        IF l_pos > 0 THEN
          l_start_date := SUBSTR(:P20_DATE_RANGE, 1, l_pos - 1);
          l_end_date   := SUBSTR(:P20_DATE_RANGE, l_pos + 4);
        ELSE
          l_start_date := :P20_DATE_RANGE;
          l_end_date   := :P20_DATE_RANGE;
        END IF;
      
        l_attendance_raw := REGEXP_REPLACE(l_attendance_raw, '[^0-9]', '');
        BEGIN
          l_attendance_num := TO_NUMBER(l_attendance_raw);
        EXCEPTION
          WHEN VALUE_ERROR THEN
            l_attendance_num := NULL;
        END;
      
        IF :P20_EVENT_ID IS NOT NULL THEN
          UPDATE UR_EVENTS
          SET EVENT_NAME          = :P20_EVENT_NAME,
              EVENT_TYPE          = :P20_EVENT_TYPE,
              EVENT_START_DATE    = TO_DATE(l_start_date, 'YYYY-MM-DD'),
              EVENT_END_DATE      = TO_DATE(l_end_date, 'YYYY-MM-DD'),
              ESTIMATED_ATTENDANCE = l_attendance_num,
              IMPACT_LEVEL        = :P20_IMPACT_LEVEL,
              IMPACT_TYPE        = :P20_IMPACT_TYPE,
              DESCRIPTION        = :P20_EVENT_DESRIPTION,
              EVENT_FREQUENCY     = :P20_FREQUENCY,
              CITY                = :P20_CITY,
              POSTCODE            = :P20_POST_CODE,
              COUNTRY             = :P20_COUNTRY,
              UPDATED_BY          = SYS_GUID(), -- replace with user ID ideally
              UPDATED_ON          = SYSDATE
          WHERE ID = :P20_EVENT_ID;
          l_message := 'Event "' || :P20_EVENT_NAME || '" updated successfully.';
        ELSE
          -- Insert new record
          INSERT INTO UR_EVENTS (
            HOTEL_ID,
            EVENT_NAME,
            EVENT_TYPE,
            EVENT_START_DATE,
            EVENT_END_DATE,
            ESTIMATED_ATTENDANCE,
            IMPACT_LEVEL,
            IMPACT_TYPE,
            DESCRIPTION,
            EVENT_FREQUENCY,
            CITY,
            POSTCODE,
            COUNTRY,
            CREATED_BY,
            UPDATED_BY,
            CREATED_ON,
            UPDATED_ON
          ) VALUES (
            :P20_HOTEL_ID,
            :P20_EVENT_NAME,
            :P20_EVENT_TYPE,
            TO_DATE(l_start_date, 'YYYY-MM-DD'),
            TO_DATE(l_end_date, 'YYYY-MM-DD'),
            l_attendance_num,
            :P20_IMPACT_LEVEL,
            :P20_IMPACT_TYPE,
            :P20_EVENT_DESRIPTION,
            :P20_FREQUENCY,
            :P20_CITY,
            :P20_POST_CODE,
            :P20_COUNTRY,
            SYS_GUID(),
            SYS_GUID(),
            SYSDATE,
            SYSDATE
          );
          l_message := 'Event "' || :P20_EVENT_NAME || '" created successfully.';
        END IF;
      
        COMMIT;
      
        l_status := 'S';
        UR_UTILS.add_alert(l_json_clob, l_message, l_status, null, null, l_json_clob);
      
      EXCEPTION
        WHEN OTHERS THEN
          l_status := 'E';
          l_message := 'Operation failed: ' || SQLERRM;
          UR_UTILS.add_alert(l_json_clob, l_message, l_status, null, null, l_json_clob);
          :P0_ALERT_MESSAGE := l_json_clob;
          RAISE;
      END;

  execution: 
    sequence: 40
    point: Processing
    run-process: Once Per Page Visit (default)

  error: 
    display-location: Inline in Notification

  server-side-condition: 
    when-button-pressed: SAVE # 12892093694500117

  configuration: 
    build-option: Commented Out # 8557885664922129

- # ====== Process: test temp Insert proces_1_1_1 ==============
  id: 23055493079494201
  identification: 
    name: test temp Insert proces_1_1_1
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      DECLARE
        l_status         VARCHAR2(10);
        l_message        CLOB;
        l_json_clob      CLOB := NULL;
        l_attendance_raw VARCHAR2(50) := :P20_ATTENDANCE;
        l_attendance_num NUMBER;
      BEGIN
        -- Convert attendance to numeric if possible
        l_attendance_raw := REGEXP_REPLACE(l_attendance_raw, '[^0-9]', '');
        BEGIN
          l_attendance_num := TO_NUMBER(l_attendance_raw);
        EXCEPTION
          WHEN VALUE_ERROR THEN
            l_attendance_num := NULL;
        END;
      
        IF :P20_EVENT_ID IS NOT NULL THEN
          -- Update existing event
          UPDATE UR_EVENTS
             SET EVENT_NAME           = :P20_EVENT_NAME,
                 EVENT_TYPE           = :P20_EVENT_TYPE,
                 EVENT_START_DATE     = TO_DATE(:P20_START_DATE, APEX_APPLICATION.G_DATE_FORMAT),
                 EVENT_END_DATE       = TO_DATE(:P20_END_DATE, APEX_APPLICATION.G_DATE_FORMAT),
                 ESTIMATED_ATTENDANCE = l_attendance_num,
                 IMPACT_LEVEL         = :P20_IMPACT_LEVEL,
                 IMPACT_TYPE          = :P20_IMPACT_TYPE,
                 DESCRIPTION          = :P20_EVENT_DESRIPTION,
                 EVENT_FREQUENCY      = :P20_FREQUENCY,
                 CITY                 = :P20_CITY,
                 POSTCODE             = :P20_POST_CODE,
                 COUNTRY              = :P20_COUNTRY,
                 UPDATED_BY           = SYS_GUID(), -- ideally replace with user ID
                 UPDATED_ON           = SYSDATE
           WHERE ID = :P20_EVENT_ID;
      
          l_message := 'Event "' || :P20_EVENT_NAME || '" updated successfully.';
      
        ELSE
          -- Insert new record
          INSERT INTO UR_EVENTS (
            HOTEL_ID,
            EVENT_NAME,
            EVENT_TYPE,
            EVENT_START_DATE,
            EVENT_END_DATE,
            ESTIMATED_ATTENDANCE,
            IMPACT_LEVEL,
            IMPACT_TYPE,
            DESCRIPTION,
            EVENT_FREQUENCY,
            CITY,
            POSTCODE,
            COUNTRY,
            CREATED_BY,
            UPDATED_BY,
            CREATED_ON,
            UPDATED_ON
          ) VALUES (
            :P20_HOTEL_ID,
            :P20_EVENT_NAME,
            :P20_EVENT_TYPE,
            TO_DATE(:P20_START_DATE, APEX_APPLICATION.G_DATE_FORMAT),
            TO_DATE(:P20_END_DATE, APEX_APPLICATION.G_DATE_FORMAT),
            l_attendance_num,
            :P20_IMPACT_LEVEL,
            :P20_IMPACT_TYPE,
            :P20_EVENT_DESRIPTION,
            :P20_FREQUENCY,
            :P20_CITY,
            :P20_POST_CODE,
            :P20_COUNTRY,
            SYS_GUID(),
            SYS_GUID(),
            SYSDATE,
            SYSDATE
          );
      
          l_message := 'Event "' || :P20_EVENT_NAME || '" created successfully.';
        END IF;
      
        COMMIT;
      
        l_status := 'S';
        UR_UTILS.add_alert(l_json_clob, l_message, l_status, NULL, NULL, l_json_clob);
      
      EXCEPTION
        WHEN OTHERS THEN
          l_status := 'E';
          l_message := 'Operation failed: ' || SQLERRM;
          UR_UTILS.add_alert(l_json_clob, l_message, l_status, NULL, NULL, l_json_clob);
          :P0_ALERT_MESSAGE := l_json_clob;
          RAISE;
      END;
      

  execution: 
    sequence: 50
    point: Processing
    run-process: Once Per Page Visit (default)

  error: 
    display-location: Inline in Notification

  server-side-condition: 
    when-button-pressed: SAVE # 12892093694500117

