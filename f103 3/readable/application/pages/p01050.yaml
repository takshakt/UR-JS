---
# ====== Page: Algorithms ====================================
id: 1050
identification: 
  name: Algorithms
  alias: ALGORITHMS
  title: Strategies

appearance: 
  page-mode: Normal
  page-template: Theme Default
  template-options: 
  - '#DEFAULT#'

navigation-menu: 
  override-user-interface-level: false

navigation: 
  cursor-focus: Do not focus cursor
  warn-on-unsaved-changes: false

javascript: 
  file-urls: 
  - '#APP_FILES#AlgoPGJS#MIN#.js'
  function-and-global-variable-declaration: |
    /*var exprCaretPos = null;
    var exprWasClicked = false;  // track if user ever clicked
    
    function setupCaretTracking(itemName){
      var el = document.getElementById(itemName);
      if (!el) return;
    
      function savePos(){
        exprCaretPos = { start: el.selectionStart, end: el.selectionEnd };
        exprWasClicked = true; // user interacted manually
      }
    
      el.addEventListener("keyup", savePos);
      el.addEventListener("click", savePos);
      el.addEventListener("focus", savePos);
    }
    
    function insertAtCursorOrEnd(itemName, text){
      var el = document.getElementById(itemName);
      if (!el) return;
    
      var oldVal = $v(itemName) || "";
      var start, end;
    
      if (exprWasClicked && exprCaretPos && typeof exprCaretPos.start === "number") {
        // insert where user clicked
        start = exprCaretPos.start;
        end   = exprCaretPos.end;
      } else {
        // default â†’ append at end
        start = end = oldVal.length;
      }
    
      var prefix = (start > 0 && oldVal[start-1] !== " ") ? " " : "";
      var suffix = (end < oldVal.length && oldVal[end] !== " ") ? " " : " ";
    
      var newVal = oldVal.substring(0, start) + prefix + text + suffix + oldVal.substring(end);
      $s(itemName, newVal);
    
      // restore caret
      setTimeout(function(){
        var pos = start + (prefix + text + suffix).length;
        exprCaretPos = { start: pos, end: pos };
        el.selectionStart = el.selectionEnd = pos;
      },0);
    }
    
    // run once
    setupCaretTracking("P1050_EXPRESSION");*/
    var exprCaretPos = null;
    
    function trackExpressionCaret(itemName) {
      var el = document.getElementById(itemName);
      if (!el) return;
    
      function savePos() {
        exprCaretPos = {
          start: el.selectionStart || 0,
          end:   el.selectionEnd   || 0
        };
      }
    
      ["click","keyup","mouseup","focus","blur"].forEach(function(ev){
        el.addEventListener(ev, savePos);
      });
    }
    
    trackExpressionCaret("P1050_EXPRESSION");
    function insertAtSavedPos(itemName, text) {
      var el = document.getElementById(itemName);
      if (!el) return;
    
      var oldVal = $v(itemName) || "";
      var start = (exprCaretPos && typeof exprCaretPos.start === "number") 
                    ? exprCaretPos.start 
                    : oldVal.length;
      var end   = (exprCaretPos && typeof exprCaretPos.end === "number") 
                    ? exprCaretPos.end 
                    : oldVal.length;
    
      // Ensure clean spacing around insert
      var prefix = (start > 0 && !/\s/.test(oldVal[start-1])) ? " " : "";
      var suffix = (end < oldVal.length && !/\s/.test(oldVal[end])) ? " " : "";
    
      var newVal = oldVal.substring(0, start) + prefix + text + suffix + oldVal.substring(end);
      $s(itemName, newVal);
    
      // Restore caret just after inserted text
      setTimeout(function(){
        var pos = start + (prefix + text + suffix).length;
        exprCaretPos = { start: pos, end: pos };
        el.focus();
        el.selectionStart = el.selectionEnd = pos;
      }, 0);
    }
    
    
    
    
    // Execute when Page Loads
    (function () {
      try {
        // Find all inputs with the id
        const inputs = Array.from(document.querySelectorAll('input#P1050_NAME'));
        if (inputs.length > 1) {
          const keeper = inputs[0]; // keep the first one
          // Remove duplicates (their closest form container if exists, else the node itself)
          inputs.slice(1).forEach(inp => {
            const fieldContainer = inp.closest('.t-Form-fieldContainer') || inp.closest('.t-Form-inputContainer') || inp.closest('.t-Region-body') || inp.parentElement;
            if (fieldContainer) fieldContainer.remove();
            else inp.remove();
          });
        }
    
        // Ensure the survived input and its parent containers can expand
        const input = document.querySelector('input#P1050_NAME');
        if (input) {
          // Stretch the input (helps flex containers)
          Object.assign(input.style, {
            width: '100%',
            maxWidth: '700px',
            boxSizing: 'border-box',
            display: 'block',
            minWidth: '0',
            flex: '1'
          });
    
          // Stretch wrapper containers if present
          const containers = [
            input.closest('.t-Form-itemWrapper'),
            input.closest('.t-Form-inputContainer'),
            input.closest('.t-Form-fieldContainer'),
            input.closest('.col'),
            input.closest('.row')
          ];
          containers.forEach(c => {
            if (c) {
              c.style.width = '100%';
              c.style.maxWidth = '100%';
              c.style.boxSizing = 'border-box';
            }
          });
        }
      } catch (e) {
        // fail silently but log for debugging
        // eslint-disable-next-line no-console
        console.error('Cleanup P1050_NAME duplicates failed', e);
      }
    })();
    
  execute-when-page-loads: |
    
    

css: 
  inline: |
    * {
        box-sizing: border-box;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
        background-color: #121212;
        color: #e0e0e0;
    }
    .hidden { display: none !important; }
    
    /* Main Page Layout */
    .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid #333;
    }
    h1 { margin: 0; color: #d4d4e0; }
    
    /* Page Footer for global buttons */
    .page-footer {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        padding-top: 20px;
        margin-top: 20px;
        border-top: 1px solid #333;
    }
    
    /* Buttons */
    .btn {
        background-color: #ffffff;
        color: #121212;
        border: none;
        padding: 10px 15px;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
        display: inline-flex;
        align-items: center;
        gap: 5px;
        transition: background-color 0.3s;
    }
    .btn:hover { background-color: #3965ea; }
    .btn-secondary { background-color: #ffffff; color: #121212; }
    .btn-secondary:hover { background-color: #4343f6; }
    .btn-danger { background-color: #cf6679; color: #121212; }
    .btn-danger:hover { background-color: #b95568; }
    .btn-small { padding: 5px 10px; font-size: 0.9rem; }
    button.btn:disabled { opacity: 0.5; cursor: not-allowed; }
    
    /* Filter Region */
    .filter-region {
        background-color: #1e1e1e;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        margin-bottom: 20px;
        overflow: hidden;
        border: 1px solid #333;
    }
    .region-header {
        background-color: #2d2d2d;
        color: #e0e0e0;
        padding: 12px 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
    }
    .region-title { font-weight: bold; font-size: 1.1rem; display: flex; align-items: center; gap: 8px; }
    .toggle-icon { transition: transform 0.3s; }
    .region-collapsed > .region-header .toggle-icon { transform: rotate(-90deg); }
    .region-content { 
        padding: 15px; 
        overflow: hidden;
        max-height: 2000px; /* Set a large max-height for the animation */
        transition: max-height 0.4s ease-in-out, padding 0.4s ease-in-out; 
    }
    .region-collapsed .region-content { max-height: 0; padding-top: 0; padding-bottom: 0; }
    
    /* Controls (Move/Delete Buttons) */
    .region-controls, .condition-controls { display: flex; align-items: center; gap: 10px; }
    .control-group { display: flex; }
    .control-group .btn { border-radius: 0; margin-left: -1px; }
    .control-group .btn:first-child { border-top-left-radius: 4px; border-bottom-left-radius: 4px; margin-left: 0; }
    .control-group .btn:last-child { border-top-right-radius: 4px; border-bottom-right-radius: 4px; }
    
    /* Sections */
    .section { margin-bottom: 20px; }
    .section-title {
        font-weight: bold;
        margin-bottom: 15px;
        color: #ffffff;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 5px;
        font-size: 1.1rem;
        border-bottom: 1px solid #444;
        padding-bottom: 8px;
    }
    
    /* Fields and Inputs */
    .field-container { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; flex-wrap: wrap; }
    .field-content { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; flex: 1; }
    .field-content.hidden { display: none; }
    select, input[type="text"], input[type="number"], input[type="date"], textarea {
        padding: 8px 10px;
        border: 1px solid #444;
        border-radius: 4px;
        background-color: #2a2a2a;
        color: #e0e0e0;
        transition: border-color 0.3s;
    }
    .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }
    .checkbox-item { display: flex; align-items: center; gap: 5px; }
    
    /* Condition Group */
    .condition-group { border: 1px solid #444; border-radius: 6px; padding: 15px; margin-bottom: 15px; background-color: #2a2a2a; }
    .condition-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; cursor: pointer; }
    .condition-title { font-weight: bold; color: #e6b5b5; display: flex; align-items: center; gap: 8px; }
    .condition-body { overflow: hidden; max-height: 1000px; transition: max-height 0.4s ease-in-out; }
    .condition-collapsed .condition-body { max-height: 0; padding-top: 0 !important; }
    .condition-collapsed > .condition-header { margin-bottom: 0; }
    .condition-collapsed > .condition-header .toggle-icon { transform: rotate(-90deg); }
    
    /* Editable Titles */
    .editable-title .title-input { font-size: inherit; font-weight: inherit; color: inherit; border: 1px solid #bb86fc; }
    
    /* Expression Area */
    .expression-container { margin-top: 15px; }
    textarea.expression-textarea { width: 100%; min-height: 100px; resize: vertical; font-family: monospace; }
    .textarea-controls { margin-top: 10px; display: flex; justify-content: space-between; align-items: center; }
    
    /* Validation Styles */
    .invalid-region { border: 2px solid #d9534f !important; border-radius: 8px; }
    .invalid-field { border: 1px solid #d9534f !important; border-radius: 4px; }
    textarea.valid-expression { border-color: #28a745 !important; }
    textarea.invalid-expression { border-color: #d9534f !important; }
    
    /* Autocomplete */
    #expression-autocomplete { position: absolute; border: 1px solid #444; background-color: #2d2d2d; border-radius: 4px; z-index: 1000; max-height: 200px; overflow-y: auto; width: auto; min-width: 150px; }
    .autocomplete-item { padding: 8px 12px; color: #e0e0e0; cursor: pointer; white-space: nowrap; }
    .autocomplete-active { background-color: #3965ea; }
    
    /* --- ISOLATED STYLES FOR ALGORITHM ICON BUTTONS --- */
    
    /* The new container for our icon buttons */
    .algo-icon-controls {
        display: inline-flex;
        align-items: center;
        gap: 5px; /* Sets the space between buttons */
    }
    
    /* The new, dedicated class for each icon button */
    .algo-icon-controls .algo-icon-btn {
        /* Sizing & Layout */
        width: 28px;
        height: 28px;
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        
        /* Aesthetics & Feel */
        line-height: 1;
        border-radius: 4px;
        border: 1px solid #666; /* A subtle border */
        background-color: #383838;
        color: #dadada;
        cursor: pointer;
        transition: background-color 0.2s ease, border-color 0.2s ease;
    }
    
    /* Hover effect for better feedback */
    .algo-icon-controls .algo-icon-btn:hover {
        background-color: #4f4f4f;
        border-color: #888;
    }
    
    /* Red hover effect specifically for the delete button */
    .algo-icon-controls .algo-icon-btn.btn-danger:hover {
        background-color: #c83c3c;
        color: #fff;
        border-color: #c83c3c;
    }
    
    /* Control the size of the SVG icon */
    .algo-icon-controls .algo-icon-btn svg {
        width: 16px;
        height: 16px;
    }
    
    /* Balance the size of the text-based icons */
    .algo-icon-controls .region-move,
    .algo-icon-controls .condition-move,
    .algo-icon-controls .delete-region,
    .algo-icon-controls .condition-remove {
        font-size: 18px;
    }
    
    /* --- MODAL OVERLAY AND DIALOG --- */
    
    /* Modal overlay */
    .modal-overlay {
        display: none; /* Hidden by default */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 2000;
        justify-content: center;
        align-items: center;
    }
    
    /* Modal content box */
    .modal-content {
        background-color: #1e1e1e;
        border: 2px solid #444;
        border-radius: 8px;
        width: 90%;
        max-width: 700px;
        max-height: 85vh;
        display: flex;
        flex-direction: column;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
    }
    
    /* Modal header */
    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        border-bottom: 1px solid #444;
        background-color: #2d2d2d;
    }
    
    .modal-header h3 {
        margin: 0;
        color: #e0e0e0;
        font-size: 1.2rem;
    }
    
    .modal-close-btn {
        background: none;
        border: none;
        color: #e0e0e0;
        font-size: 2rem;
        line-height: 1;
        cursor: pointer;
        padding: 0;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        transition: background-color 0.2s;
    }
    
    .modal-close-btn:hover {
        background-color: #444;
    }
    
    /* Modal body */
    .modal-body {
        padding: 20px;
        overflow-y: auto;
        flex: 1;
    }
    
    /* --- SEARCHABLE ATTRIBUTE SELECT COMPONENT --- */
    
    /* Main container (adjusted for modal) */
    .searchable-attribute-container {
        display: flex;
        flex-direction: column;
        gap: 12px;
        width: 100%;
    }
    
    /* Search input */
    .attribute-search-input {
        width: 100%;
        padding: 10px 14px;
        border: 1px solid #555;
        border-radius: 4px;
        background-color: #2a2a2a;
        color: #e0e0e0;
        font-size: 1rem;
        transition: border-color 0.3s;
    }
    
    .attribute-search-input:focus {
        outline: none;
        border-color: #3965ea;
    }
    
    .attribute-search-input::placeholder {
        color: #888;
    }
    
    /* Filter chips container */
    .attribute-filters {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }
    
    .filter-row {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-wrap: wrap;
    }
    
    .filter-label {
        font-size: 0.85rem;
        color: #b0b0b0;
        font-weight: bold;
        min-width: 80px;
    }
    
    /* Filter chips */
    .filter-chip {
        padding: 4px 12px;
        border: 1px solid #555;
        border-radius: 16px;
        background-color: #383838;
        color: #d0d0d0;
        font-size: 0.85rem;
        cursor: pointer;
        transition: all 0.2s ease;
        white-space: nowrap;
    }
    
    .filter-chip:hover {
        background-color: #4a4a4a;
        border-color: #666;
    }
    
    .filter-chip.active {
        background-color: #3965ea;
        color: #ffffff;
        border-color: #3965ea;
        font-weight: bold;
    }
    
    /* Results count */
    .results-count {
        font-size: 0.8rem;
        color: #888;
        padding: 4px 0;
        text-align: right;
    }
    
    /* Results container */
    .attribute-results {
        max-height: 400px;
        overflow-y: auto;
        border: 1px solid #444;
        border-radius: 4px;
        background-color: #2a2a2a;
    }
    
    /* Scrollbar styling for results */
    .attribute-results::-webkit-scrollbar {
        width: 8px;
    }
    
    .attribute-results::-webkit-scrollbar-track {
        background: #2a2a2a;
        border-radius: 4px;
    }
    
    .attribute-results::-webkit-scrollbar-thumb {
        background: #555;
        border-radius: 4px;
    }
    
    .attribute-results::-webkit-scrollbar-thumb:hover {
        background: #666;
    }
    
    /* Individual result item */
    .attribute-result-item {
        padding: 10px 12px;
        color: #e0e0e0;
        cursor: pointer;
        border-bottom: 1px solid #333;
        transition: background-color 0.2s ease;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    
    .attribute-result-item:last-child {
        border-bottom: none;
    }
    
    .attribute-result-item:hover {
        background-color: #3965ea;
        color: #ffffff;
    }
    
    /* No results message */
    .no-results {
        padding: 20px;
        text-align: center;
        color: #888;
        font-style: italic;
    }
    
    /* Search text highlighting */
    .search-highlight {
        background-color: #ffd700;
        color: #121212;
        font-weight: bold;
        padding: 1px 2px;
        border-radius: 2px;
    }
    
    /* Keep highlight visible on hover */
    .attribute-result-item:hover .search-highlight {
        background-color: #ffed4e;
        color: #000000;
    }
    

security: 
  authentication: Page Requires Authentication
  deep-linking: Application Default
  page-access-protection: Unrestricted
  form-auto-complete: Off
  browser-cache: Application Default

session-management: 
  rejoin-sessions: Application Default

advanced: 
  enable-duplicate-page-submissions: Yes - Enable page to be re-posted
  reload-on-submit: Only for Success

server-cache: 
  caching: Disabled

regions: 
- # ====== Region: Expression Builder JS =======================
  id: 9903805002138617
  identification: 
    name: Expression Builder JS
    type: Static Content

  source: 
    html-code: |
      <div class="container">
          <!-- <div class="header">
              <h1>SQL Expression Builder</h1>
              <div class="btn" id="addRegionBtn">
                  <span>+</span> Add
              </div>
          </div> -->
          <div class="btn" id="addRegionBtn">
              <span>+</span> Add
          </div>
          <div id="filterContainer"></div>
          
          <div class="json-output" id="jsonOutput"></div>
      
          <div class="page-footer">
              <div id="validateAllBtn" class="btn btn-secondary">Validate</div>
              <div id="saveAllBtn" class="btn">Save</div>
          </div>
      </div>

  layout: 
    sequence: 30
    parent-region: Main Region # 11676271632603126
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--removeHeader js-removeLandmark
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Main Region =================================
  id: 11676271632603126
  identification: 
    name: Main Region
    type: Static Content

  layout: 
    sequence: 40
    parent-region: No Parent
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--hideHeader js-addHiddenHeadingRoleDesc
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Algorithm ===================================
  id: 11676380894603127
  identification: 
    name: Algorithm
    type: Static Content

  layout: 
    sequence: 10
    parent-region: Main Region # 11676271632603126
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: ALGO EXPRESSION MAIN ========================
  id: 11676446925603128
  identification: 
    name: ALGO EXPRESSION MAIN
    type: Static Content

  layout: 
    sequence: 20
    parent-region: Main Region # 11676271632603126
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--hideHeader js-addHiddenHeadingRoleDesc
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  configuration: 
    build-option: Commented Out # 8557885664922129

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: ALGO DEFNITION ==============================
  id: 11676629408603130
  identification: 
    name: ALGO DEFNITION
    title: ALGO DEFNITION
    type: Static Content

  layout: 
    sequence: 20
    parent-region: Algorithm # 11676380894603127
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: ATTRIBUTES ==================================
  id: 11677026949603134
  identification: 
    name: ATTRIBUTES
    type: Static Content

  layout: 
    sequence: 10
    parent-region: ALGO EXPRESSION MAIN # 11676446925603128
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--hideHeader js-addHiddenHeadingRoleDesc
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  configuration: 
    build-option: Commented Out # 8557885664922129

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: EXPRESSIONS =================================
  id: 11677172657603135
  identification: 
    name: EXPRESSIONS
    title: Expression
    type: Static Content

  layout: 
    sequence: 30
    parent-region: ALGO EXPRESSION MAIN # 11676446925603128
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: CONTROLS ====================================
  id: 11677249325603136
  identification: 
    name: CONTROLS
    type: Static Content

  layout: 
    sequence: 40
    parent-region: ALGO EXPRESSION MAIN # 11676446925603128
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--hideHeader js-addHiddenHeadingRoleDesc
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: DEFINITION ==================================
  id: 11677573094603139
  identification: 
    name: DEFINITION
    type: Static Content

  layout: 
    sequence: 10
    parent-region: ALGO DEFNITION # 11676629408603130
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: 3

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--hideHeader js-addHiddenHeadingRoleDesc
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: VERSION =====================================
  id: 11677686826603140
  identification: 
    name: VERSION
    type: Static Content

  layout: 
    sequence: 20
    parent-region: ALGO DEFNITION # 11676629408603130
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: false
    column: 5
    new-column: true
    column-span: 6

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--hideHeader js-addHiddenHeadingRoleDesc
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Calculation =================================
  id: 12884553663327132
  identification: 
    name: Calculation
    title: 3. Calculation
    type: Static Content

  layout: 
    sequence: 30
    parent-region: ALGO EXPRESSION MAIN # 11676446925603128
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Filters =====================================
  id: 13903657768313901
  identification: 
    name: Filters
    title: 1. Filters
    type: Static Content

  layout: 
    sequence: 10
    parent-region: ALGO EXPRESSION MAIN # 11676446925603128
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: 1
    new-column: true
    column-span: 6

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Stay Window =================================
  id: 13903710227313902
  identification: 
    name: Stay Window
    type: Static Content

  layout: 
    sequence: 10
    parent-region: Filters # 13903657768313901
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Lead Time ===================================
  id: 13903954637313904
  identification: 
    name: Lead Time
    type: Static Content

  layout: 
    sequence: 30
    parent-region: Filters # 13903657768313901
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: DoW =========================================
  id: 13904021256313905
  identification: 
    name: DoW
    type: Static Content

  layout: 
    sequence: 40
    parent-region: Filters # 13903657768313901
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Min Rate ====================================
  id: 13904138739313906
  identification: 
    name: Min Rate
    type: Static Content

  layout: 
    sequence: 50
    parent-region: Filters # 13903657768313901
    slot: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Conditions ==================================
  id: 13907713668313942
  identification: 
    name: Conditions
    title: 2. Conditions
    type: Static Content

  layout: 
    sequence: 20
    parent-region: ALGO EXPRESSION MAIN # 11676446925603128
    slot: BODY
    start-new-layout: false
    start-new-row: false
    column: 7
    new-column: true
    column-span: 6

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--noBorder
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Breadcrumb ==================================
  id: 15696178439549835
  identification: 
    name: Breadcrumb
    title: Algorithms
    type: Breadcrumb

  source: 
    breadcrumb: Breadcrumb # 8558440305922134

  layout: 
    sequence: 20
    parent-region: Hotel Selector # 25697469516364507
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Title Bar
    template-options: 
    - '#DEFAULT#'
    - t-BreadcrumbRegion--useBreadcrumbTitle
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    appearance: 
      breadcrumb-template: Breadcrumb
      template-options: 
      - '#DEFAULT#'

page-items: 
- # ====== Page Item: P1050_DEBUG_OUT ==========================
  id: 10425466471683922
  identification: 
    name: P1050_DEBUG_OUT
    type: Text Field

  label: 
    label: Debug Out
    alignment: Left

  settings: 
    subtype: Text
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 50
    region: No Parent
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Item
    item: P0_HOTEL_ID
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

  configuration: 
    build-option: Commented Out # 8557885664922129

- # ====== Page Item: P1050_EXPRESSION =========================
  id: 10425588743683923
  identification: 
    name: P1050_EXPRESSION
    type: Hidden

  settings: 
    value-protected: true

  layout: 
    sequence: 20
    region: Calculation # 12884553663327132
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_ALGO_LIST ==========================
  id: 11676587772603129
  identification: 
    name: P1050_ALGO_LIST
    type: Select List

  label: 
    label: Strategies List
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 10
    region: Algorithm # 11676380894603127
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: 1
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Required - Floating
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: false

  list-of-values: 
    type: SQL Query
    sql-query: |
      select name as D, ID as R
      from UR_ALGOS
      where hotel_id = :P1050_HOTEL_LIST
      union all
      select '-- Define New --' AS D, hextoraw('0') as R
      from DUAL
    display-extra-values: false
    display-null-value: false

  cascading-list-of-values: 
    parent-item(s): 
    - P1050_HOTEL_LIST
    parent-required: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  default: 
    type: Static
    static-value: 00

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_VERSION ============================
  id: 11676739885603131
  identification: 
    name: P1050_VERSION
    type: Select List

  label: 
    label: Version
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 10
    region: VERSION # 11677686826603140
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: 4
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: false

  list-of-values: 
    type: SQL Query
    sql-query: |
      select version || ' (' || updated_on || ')' as d, id as r 
      from ur_algo_versions
      where algo_id = :P1050_ALGO_LIST
      order by id desc
    display-extra-values: false
    display-null-value: false

  cascading-list-of-values: 
    parent-item(s): 
    - P1050_ALGO_LIST
    items-to-submit: 
    - P1050_ALGO_LIST
    - P1050_VERSION
    parent-required: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  default: 
    type: SQL Query (return single value)
    sql-query-(return-single-value): |
      select current_version_id
      from ur_algos
      where id = :P1050_ALGO_LIST;

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_DESCRIPTION ========================
  id: 11677397519603137
  identification: 
    name: P1050_DESCRIPTION
    type: Textarea

  label: 
    label: Description
    alignment: Left

  settings: 
    resizable: true
    auto-height: false
    character-counter: false
    trim-spaces: Leading and Trailing

  layout: 
    sequence: 20
    region: DEFINITION # 11677573094603139
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    height: 5

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_NAME ===============================
  id: 11677406857603138
  identification: 
    name: P1050_NAME
    type: Text Field

  label: 
    alignment: Left

  settings: 
    subtype: Text
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 10
    region: DEFINITION # 11677573094603139
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30
    value-placeholder: Name

  validation: 
    value-required: true
    maximum-length: 100

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_ATTRIBUTES =========================
  id: 11677866080603142
  identification: 
    name: P1050_ATTRIBUTES
    type: Select List

  label: 
    label: Attributes
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 10
    region: Calculation # 12884553663327132
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: 4
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: false

  list-of-values: 
    type: SQL Query
    sql-query: |
      select name || ' (' || key || ')' as D, key as R
      from UR_ALGO_ATTRIBUTES
      where 1 = 1
      and hotel_id = :P0_HOTEL_ID
    display-extra-values: true
    display-null-value: true

  cascading-list-of-values: 
    parent-item(s): 
    - P0_HOTEL_ID
    items-to-submit: 
    - P0_HOTEL_ID
    parent-required: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_OPERATORS ==========================
  id: 11677952350603143
  identification: 
    name: P1050_OPERATORS
    type: Select List

  label: 
    label: Operators
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 10
    region: Calculation # 12884553663327132
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: 4
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: false

  list-of-values: 
    type: Shared Component
    list-of-values: UR EXPRESSION OPERATORS # 12487682573470467
    display-extra-values: true
    display-null-value: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_FUNCTIONS ==========================
  id: 11678038604603144
  identification: 
    name: P1050_FUNCTIONS
    type: Select List

  label: 
    label: Functions
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 10
    region: Calculation # 12884553663327132
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: 4
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: false

  list-of-values: 
    type: Shared Component
    list-of-values: UR EXPRESSION FUNCTIONS # 12494151488529142
    display-extra-values: true
    display-null-value: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_HOTEL_LIST =========================
  id: 12467267944198922
  identification: 
    name: P1050_HOTEL_LIST
    type: Select List

  label: 
    label: Hotel
    alignment: Left

  settings: 
    page-action-on-selection: None

  multiple-values: 
    type: No

  layout: 
    sequence: 30
    region: No Parent
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: true

  list-of-values: 
    type: SQL Query
    sql-query: |
      SELECT
        nvl(Hotel_NAME,'Name') as Name,
      ID as ID
      FROM
      UR_HOTELS
      WHERE nvl(ASSOCIATION_END_DATE,sysdate) >= sysdate
      
    display-extra-values: true
    display-null-value: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_STAY_WINDOW_FROM ===================
  id: 12881926860327106
  identification: 
    name: P1050_STAY_WINDOW_FROM
    type: Date Picker

  label: 
    label: Stay Window From
    alignment: Left

  settings: 
    show-time: false
    display-as: Popup
    minimum-date: None
    maximum-date: None
    multiple-months: No
    use-defaults: true

  layout: 
    sequence: 20
    region: ATTRIBUTES # 11677026949603134
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 9
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_STAY_WINDOW_TO =====================
  id: 12882214341327109
  identification: 
    name: P1050_STAY_WINDOW_TO
    type: Date Picker

  label: 
    label: Stay Window To
    alignment: Left

  settings: 
    show-time: false
    display-as: Popup
    minimum-date: None
    maximum-date: None
    multiple-months: No
    use-defaults: true

  layout: 
    sequence: 30
    region: ATTRIBUTES # 11677026949603134
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 11
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_DAY_OF_WEEK ========================
  id: 12882418522327111
  identification: 
    name: P1050_DAY_OF_WEEK
    type: Checkbox Group

  label: 
    label: Day Of Week
    alignment: Left

  settings: 
    number-of-columns: 7

  multiple-values: 
    type: Delimited List
    separator: ':'

  layout: 
    sequence: 40
    region: ATTRIBUTES # 11677026949603134
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: 5
    new-column: true
    column-span: 6
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'

  validation: 
    value-required: false

  list-of-values: 
    type: Static Values
    static-values: 'STATIC:Sunday;0,Monday;1,Tuesday;2,Wednesday;3,Thursday;4,Friday;5,Saturday;6'
    display-extra-values: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    escape-special-characters: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_LEAD_TIME_TYPE =====================
  id: 12882521250327112
  identification: 
    name: P1050_LEAD_TIME_TYPE
    type: Popup LOV

  label: 
    label: Lead Time Type
    alignment: Left

  settings: 
    display-as: Inline Popup
    initial-fetch: Automatic
    manual-entry: false
    fetch-on-search: true

  search: 
    match-type: Contains
    case-sensitive: false
    minimum-characters: 0

  multiple-values: 
    type: No

  layout: 
    sequence: 10
    region: ATTRIBUTES # 11677026949603134
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: 1
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  list-of-values: 
    type: Shared Component
    list-of-values: UR LEAD TIME TYPES # 12968322337095291
    display-extra-values: true
    display-null-value: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_LEAD_TIME ==========================
  id: 12882605897327113
  identification: 
    name: P1050_LEAD_TIME
    type: Text Field

  label: 
    label: Lead Time
    alignment: Left

  settings: 
    subtype: Text
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 10
    region: ATTRIBUTES # 11677026949603134
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 3
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_LEAD_TIME_FROM =====================
  id: 12882794333327114
  identification: 
    name: P1050_LEAD_TIME_FROM
    type: Date Picker

  label: 
    label: Lead Time From
    alignment: Left

  settings: 
    show-time: false
    display-as: Popup
    minimum-date: None
    maximum-date: None
    multiple-months: No
    use-defaults: true

  layout: 
    sequence: 10
    region: ATTRIBUTES # 11677026949603134
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 5
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_LEAD_TIME_TO =======================
  id: 12882801846327115
  identification: 
    name: P1050_LEAD_TIME_TO
    type: Date Picker

  label: 
    label: Lead Time To
    alignment: Left

  settings: 
    show-time: false
    display-as: Popup
    minimum-date: None
    maximum-date: None
    multiple-months: No
    use-defaults: true

  layout: 
    sequence: 10
    region: ATTRIBUTES # 11677026949603134
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 7
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_EVENT_SCORE_CHECK ==================
  id: 12883707364327124
  identification: 
    name: P1050_EVENT_SCORE_CHECK
    type: Checkbox

  label: 
    label: Event Score
    alignment: Left

  settings: 
    use-defaults: true

  layout: 
    sequence: 100
    region: Conditions # 13907713668313942
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: 1
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    - t-Form-fieldContainer--large

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_EVENT_SCORE_OPERATORS ==============
  id: 12883845233327125
  identification: 
    name: P1050_EVENT_SCORE_OPERATORS
    type: Popup LOV

  label: 
    label: Operators
    alignment: Left

  settings: 
    display-as: Inline Popup
    initial-fetch: Automatic
    manual-entry: false
    fetch-on-search: false

  search: 
    match-type: Contains
    case-sensitive: false
    minimum-characters: 0

  multiple-values: 
    type: No

  layout: 
    sequence: 110
    region: Conditions # 13907713668313942
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 7
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  list-of-values: 
    type: Shared Component
    list-of-values: UR ALGO CONDITIONS OPERATORS # 14015089005891584
    display-extra-values: true
    display-null-value: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_EVENT_SCORE_VALUE ==================
  id: 12883941342327126
  identification: 
    name: P1050_EVENT_SCORE_VALUE
    type: Popup LOV

  label: 
    label: Value
    alignment: Left

  settings: 
    display-as: Inline Popup
    initial-fetch: Automatic
    manual-entry: false
    fetch-on-search: false

  search: 
    match-type: Contains
    case-sensitive: false
    minimum-characters: 0

  multiple-values: 
    type: No

  layout: 
    sequence: 120
    region: Conditions # 13907713668313942
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 9
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  list-of-values: 
    type: Shared Component
    list-of-values: UR EVENT SCORE # 14574086177037113
    display-extra-values: true
    display-null-value: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_RANKING_COMP_SET_CHECK =============
  id: 12884059453327127
  identification: 
    name: P1050_RANKING_COMP_SET_CHECK
    type: Checkbox

  label: 
    label: Property Ranking (Comp. Set)
    alignment: Left

  settings: 
    use-defaults: true

  layout: 
    sequence: 50
    region: Conditions # 13907713668313942
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: 1
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    - t-Form-fieldContainer--large

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_RANKING_COMP_SET_OPERATORS =========
  id: 12884192231327128
  identification: 
    name: P1050_RANKING_COMP_SET_OPERATORS
    type: Popup LOV

  label: 
    label: Operators
    alignment: Left

  settings: 
    display-as: Inline Popup
    initial-fetch: Automatic
    manual-entry: false
    fetch-on-search: false

  search: 
    match-type: Contains
    case-sensitive: false
    minimum-characters: 0

  multiple-values: 
    type: No

  layout: 
    sequence: 80
    region: Conditions # 13907713668313942
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 7
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  list-of-values: 
    type: Shared Component
    list-of-values: UR ALGO CONDITIONS OPERATORS # 14015089005891584
    display-extra-values: true
    display-null-value: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_RANKING_COMP_SET_VALUE =============
  id: 12884285370327129
  identification: 
    name: P1050_RANKING_COMP_SET_VALUE
    type: Popup LOV

  label: 
    label: Value
    alignment: Left

  settings: 
    display-as: Inline Popup
    initial-fetch: Automatic
    manual-entry: false
    fetch-on-search: false

  search: 
    match-type: Contains
    case-sensitive: false
    minimum-characters: 0

  multiple-values: 
    type: No

  layout: 
    sequence: 90
    region: Conditions # 13907713668313942
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 9
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  list-of-values: 
    type: SQL Query
    sql-query: |
      WITH comp_count AS (
          -- 1. Use JSON_TABLE to count the matching 'COMP_PROPERTY' qualifiers
          SELECT
              COUNT(jt.qualifier_value) + 1 AS PROPERTY_COUNT -- *** ADDING +1 HERE ***
          FROM
              UR_TEMPLATES t,
              JSON_TABLE(
                  t.DEFINITION,
                  '$[*]'
                  COLUMNS (
                      qualifier_value VARCHAR2(100) PATH '$.qualifier'
                  )
              ) jt
          WHERE
              t.ID = :P1050_RANKING_COMP_SET_TYPE -- Replace with your desired ID or remove WHERE clause
              AND jt.qualifier_value = 'COMP_PROPERTY' -- Filter only the COMP_PROPERTY rows
      ),
      number_sequence (n, max_n) AS (
          -- 2. Recursive CTE to generate numbers from 1 up to the (Count + 1)
          -- Anchor member: Start the sequence at 1
          SELECT
              1 AS n,
              cc.PROPERTY_COUNT AS max_n
          FROM
              comp_count cc
          WHERE
              cc.PROPERTY_COUNT > 0
          UNION ALL
          -- Recursive member: Increment the number until it reaches (Count + 1)
          SELECT
              n + 1,
              max_n
          FROM
              number_sequence
          WHERE
              n < max_n
      )
      -- 3. Final selection of the generated number sequence
      SELECT
          n AS SEQUENCE_NUMBER
      FROM
          number_sequence
      ORDER BY
          SEQUENCE_NUMBER;
    display-extra-values: true
    display-null-value: true

  cascading-list-of-values: 
    parent-item(s): 
    - P1050_RANKING_COMP_SET_TYPE
    items-to-submit: 
    - P1050_RANKING_COMP_SET_TYPE
    parent-required: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_RANKING_COMP_SET_TYPE ==============
  id: 12884363989327130
  identification: 
    name: P1050_RANKING_COMP_SET_TYPE
    type: Popup LOV

  label: 
    label: Type
    alignment: Left

  settings: 
    display-as: Inline Popup
    initial-fetch: Automatic
    manual-entry: false
    fetch-on-search: false

  search: 
    match-type: Contains
    case-sensitive: false
    minimum-characters: 0

  multiple-values: 
    type: No

  layout: 
    sequence: 60
    region: Conditions # 13907713668313942
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 3
    new-column: true
    column-span: 4
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  list-of-values: 
    type: SQL Query
    sql-query: |
      select NAME as D, ID as R
      from UR_TEMPLATES
      where 1 = 1
      and HOTEL_ID = :P0_HOTEL_ID
      and TYPE = 'RST'
    display-extra-values: true
    display-null-value: true

  cascading-list-of-values: 
    parent-item(s): 
    - P0_HOTEL_ID
    items-to-submit: 
    - P0_HOTEL_ID
    parent-required: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_OCC_THRESHOD_TYPE ==================
  id: 12884443175327131
  identification: 
    name: P1050_OCC_THRESHOD_TYPE
    type: Popup LOV

  label: 
    label: Attribute
    alignment: Left

  settings: 
    display-as: Inline Popup
    initial-fetch: Automatic
    manual-entry: false
    fetch-on-search: false

  search: 
    match-type: Contains
    case-sensitive: false
    minimum-characters: 0

  multiple-values: 
    type: No

  layout: 
    sequence: 20
    region: Conditions # 13907713668313942
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 3
    new-column: true
    column-span: 4
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  list-of-values: 
    type: SQL Query
    sql-query: |
      select NAME || ' (' || (select name from UR_TEMPLATES where id = template_id and active = 'N') || ')'
      from UR_ALGO_ATTRIBUTES
      where 1 = 1
      and HOTEL_ID = :P0_HOTEL_ID
      and upper(ATTRIBUTE_QUALIFIER) = 'OCCUPANCY'
    display-extra-values: true
    display-null-value: true

  cascading-list-of-values: 
    parent-item(s): 
    - P0_HOTEL_ID
    items-to-submit: 
    - P0_HOTEL_ID
    parent-required: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_STAY_WINDOW_CHECK ==================
  id: 13904368926313908
  identification: 
    name: P1050_STAY_WINDOW_CHECK
    type: Checkbox

  label: 
    label: Stay Window
    alignment: Left

  settings: 
    use-defaults: true

  layout: 
    sequence: 10
    region: Stay Window # 13903710227313902
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 1
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    - t-Form-fieldContainer--large

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_STAY_W_FROM ========================
  id: 13904468593313909
  identification: 
    name: P1050_STAY_W_FROM
    type: Date Picker

  label: 
    label: From
    alignment: Left

  settings: 
    show-time: false
    display-as: Popup
    minimum-date: None
    maximum-date: None
    multiple-months: No
    use-defaults: true

  layout: 
    sequence: 20
    region: Stay Window # 13903710227313902
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 3
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_STAY_W_TO ==========================
  id: 13904586128313910
  identification: 
    name: P1050_STAY_W_TO
    type: Date Picker

  label: 
    label: To
    alignment: Left

  settings: 
    show-time: false
    display-as: Popup
    minimum-date: None
    maximum-date: None
    multiple-months: No
    use-defaults: true

  layout: 
    sequence: 30
    region: Stay Window # 13903710227313902
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 5
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_LEAD_TIME_CHECK ====================
  id: 13904689353313911
  identification: 
    name: P1050_LEAD_TIME_CHECK
    type: Checkbox

  label: 
    label: Lead Time
    alignment: Left

  settings: 
    use-defaults: true

  layout: 
    sequence: 10
    region: Lead Time # 13903954637313904
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 1
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    - t-Form-fieldContainer--large

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_LEAD_T_TYPE ========================
  id: 13904767414313912
  identification: 
    name: P1050_LEAD_T_TYPE
    type: Popup LOV

  label: 
    label: Type
    alignment: Left

  settings: 
    display-as: Inline Popup
    initial-fetch: Automatic
    manual-entry: false
    fetch-on-search: false

  search: 
    match-type: Contains
    case-sensitive: false
    minimum-characters: 0

  multiple-values: 
    type: No

  layout: 
    sequence: 20
    region: Lead Time # 13903954637313904
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 3
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  list-of-values: 
    type: Shared Component
    list-of-values: UR LEAD TIME TYPES # 12968322337095291
    display-extra-values: true
    display-null-value: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_LEAD_T_FROM ========================
  id: 13904861683313913
  identification: 
    name: P1050_LEAD_T_FROM
    type: Date Picker

  label: 
    label: From
    alignment: Left

  settings: 
    show-time: false
    display-as: Popup
    minimum-date: None
    maximum-date: None
    multiple-months: No
    use-defaults: true

  layout: 
    sequence: 40
    region: Lead Time # 13903954637313904
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 6
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_LEAD_T_TO ==========================
  id: 13904927024313914
  identification: 
    name: P1050_LEAD_T_TO
    type: Date Picker

  label: 
    label: To
    alignment: Left

  settings: 
    show-time: false
    display-as: Popup
    minimum-date: None
    maximum-date: None
    multiple-months: No
    use-defaults: true

  layout: 
    sequence: 50
    region: Lead Time # 13903954637313904
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 8
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_DOW_CHECK ==========================
  id: 13905036984313915
  identification: 
    name: P1050_DOW_CHECK
    type: Checkbox

  label: 
    label: Day of Week
    alignment: Left

  settings: 
    use-defaults: true

  layout: 
    sequence: 10
    region: DoW # 13904021256313905
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 1
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    - t-Form-fieldContainer--large

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_DOW_DAYS ===========================
  id: 13905196165313916
  identification: 
    name: P1050_DOW_DAYS
    type: Checkbox Group

  label: 
    alignment: Left

  settings: 
    number-of-columns: 7

  multiple-values: 
    type: Delimited List
    separator: ':'

  layout: 
    sequence: 20
    region: DoW # 13904021256313905
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 3
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    - t-Form-fieldContainer--large

  validation: 
    value-required: false

  list-of-values: 
    type: Static Values
    static-values: 'STATIC2:SUN;1,MON;2,TUE;3,WED;4,THU;5,FRI;6,SAT;7'
    display-extra-values: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    escape-special-characters: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_MIN_RATE_CHECK =====================
  id: 13905260765313917
  identification: 
    name: P1050_MIN_RATE_CHECK
    type: Checkbox

  label: 
    label: Minimum Rate
    alignment: Left

  settings: 
    use-defaults: true

  layout: 
    sequence: 10
    region: Min Rate # 13904138739313906
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 1
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    - t-Form-fieldContainer--large

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_MIN_RATE ===========================
  id: 13905360532313918
  identification: 
    name: P1050_MIN_RATE
    type: Text Field

  label: 
    label: Â£
    alignment: Left

  settings: 
    subtype: Text
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 20
    region: Min Rate # 13904138739313906
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 3
    new-column: true
    column-span: 1
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_LEAD_T_TIME ========================
  id: 13906745201313932
  identification: 
    name: P1050_LEAD_T_TIME
    type: Text Field

  label: 
    alignment: Left

  settings: 
    subtype: Text
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 30
    region: Lead Time # 13903954637313904
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 5
    new-column: true
    column-span: 1
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_OCC_THRESHOLD_CHECK ================
  id: 13907821358313943
  identification: 
    name: P1050_OCC_THRESHOLD_CHECK
    type: Checkbox

  label: 
    label: Occupancy Threshold %
    alignment: Left

  settings: 
    use-defaults: true

  layout: 
    sequence: 10
    region: Conditions # 13907713668313942
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: 1
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    - t-Form-fieldContainer--large

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_OCC_THR_OPERATORS ==================
  id: 13907920602313944
  identification: 
    name: P1050_OCC_THR_OPERATORS
    type: Popup LOV

  label: 
    label: Operators
    alignment: Left

  settings: 
    display-as: Inline Popup
    initial-fetch: Automatic
    manual-entry: false
    fetch-on-search: false

  search: 
    match-type: Contains
    case-sensitive: false
    minimum-characters: 0

  multiple-values: 
    type: No

  layout: 
    sequence: 30
    region: Conditions # 13907713668313942
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 7
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  list-of-values: 
    type: Shared Component
    list-of-values: UR ALGO CONDITIONS OPERATORS # 14015089005891584
    display-extra-values: true
    display-null-value: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_OCC_THRESHOLD_VALUE ================
  id: 13908050690313945
  identification: 
    name: P1050_OCC_THRESHOLD_VALUE
    type: Number Field

  label: 
    label: Value
    alignment: Left

  settings: 
    minimum-value: 0
    maximum-value: 100
    number-alignment: Start
    virtual-keyboard: Decimal

  layout: 
    sequence: 40
    region: Conditions # 13907713668313942
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: 9
    new-column: true
    column-span: 2
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P1050_ALERT_MESSAGE ======================
  id: 31872891025853919
  identification: 
    name: P1050_ALERT_MESSAGE
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 20
    region: No Parent
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Always, replacing any existing value in session state

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

buttons: 
- # ====== Button: Strategy_Data ===============================
  id: 9642405095450628
  identification: 
    button-name: Strategy_Data
    label: Test Strategy

  layout: 
    sequence: 20
    region: VERSION # 11677686826603140
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    alignment: Left center

  appearance: 
    button-template: Text
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--gapTop

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:26:&SESSION.::&DEBUG.:::'
      page: 26 # Strategy Data

    warn-on-unsaved-changes: Do Not Check

  advanced: 
    static-id: strategyData

- # ====== Button: Clear =======================================
  id: 11678142393603145
  identification: 
    button-name: Clear
    label: Clear

  layout: 
    sequence: 10
    region: Calculation # 12884553663327132
    slot: CLOSE
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text
    hot: false
    template-options: 
    - '#DEFAULT#'

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: true

- # ====== Button: Save ========================================
  id: 11678270842603146
  identification: 
    button-name: Save
    label: Save

  layout: 
    sequence: 20
    region: CONTROLS # 11677249325603136
    slot: CREATE
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text
    hot: true
    template-options: 
    - '#DEFAULT#'
    - t-Button--success

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: true

- # ====== Button: Validate ====================================
  id: 11678311034603147
  identification: 
    button-name: Validate
    label: Validate

  layout: 
    sequence: 10
    region: CONTROLS # 11677249325603136
    slot: CREATE
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--primary

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: false

- # ====== Button: Delete ======================================
  id: 11678496244603148
  identification: 
    button-name: Delete
    label: Delete

  layout: 
    sequence: 10
    region: CONTROLS # 11677249325603136
    slot: CLOSE
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--danger

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: true

  confirmation: 
    message: This will delete the Algo along with its versions, are you sure?
    style: Warning

- # ====== Button: P1050_BTN_ADD_VALUE =========================
  id: 12543349538179907
  identification: 
    button-name: P1050_BTN_ADD_VALUE
    label: Add Value

  layout: 
    sequence: 50
    region: ATTRIBUTES # 11677026949603134
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    alignment: Left center

  appearance: 
    button-template: Text
    hot: false
    template-options: 
    - '#DEFAULT#'

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: true

  configuration: 
    build-option: Commented Out # 8557885664922129

- # ====== Button: Duplicate_Strategy ==========================
  id: 18156679423285632
  identification: 
    button-name: Duplicate_Strategy
    label: Duplicate Strategy

  layout: 
    sequence: 30
    region: VERSION # 11677686826603140
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    alignment: Left center

  appearance: 
    button-template: Text
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--gapTop

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: false

  configuration: 
    build-option: Commented Out # 8557885664922129

dynamic-actions: 
- # ====== Dynamic Action: Algo Change =========================
  id: 10425681259683924
  identification: 
    name: Algo Change

  execution: 
    sequence: 110
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1050_ALGO_LIST

  client-side-condition: 
    type: Item != Value
    item: P1050_ALGO_LIST
    value: 00

  actions: 
  - # ====== Action: Set Value ===================================
    id: 9642556355450629
    identification: 
      action: Set Value

    settings: 
      set-type: SQL Statement
      sql-statement: 'select :P1050_ALGO_LIST from Dual'
      escape-special-characters: true
      suppress-change-event: true

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_ALGO_LIST

    execution: 
      sequence: 50
      event: Algo Change # 10425681259683924
      fire-when-event-result-is: True
      fire-on-initialization: true
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: Set Name ====================================
    id: 10425727080683925
    identification: 
      name: Set Name
      action: Set Value

    settings: 
      set-type: SQL Statement
      sql-statement: 'select name from ur_algos where id = :P1050_ALGO_LIST '
      items-to-submit: 
      - P1050_ALGO_LIST
      escape-special-characters: true
      suppress-change-event: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_NAME

    execution: 
      sequence: 10
      event: Algo Change # 10425681259683924
      fire-when-event-result-is: True
      fire-on-initialization: true
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: Set Algo Description ========================
    id: 10425835619683926
    identification: 
      name: Set Algo Description
      action: Set Value

    settings: 
      set-type: SQL Statement
      sql-statement: 'select description from ur_algos where id = :P1050_ALGO_LIST '
      items-to-submit: 
      - P1050_ALGO_LIST
      escape-special-characters: true
      suppress-change-event: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_DESCRIPTION

    execution: 
      sequence: 20
      event: Algo Change # 10425681259683924
      fire-when-event-result-is: True
      fire-on-initialization: true
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: set latest version ==========================
    id: 12542937994179903
    identification: 
      name: set latest version
      action: Set Value

    settings: 
      set-type: SQL Statement
      sql-statement: |
        SELECT version || ' (' || updated_on || ')' 
        FROM UR_ALGO_VERSIONS
        WHERE algo_id = :P1050_ALGO_LIST
        order by id desc
        FETCH FIRST 1 ROW ONLY
      items-to-submit: 
      - P1050_ALGO_LIST
      escape-special-characters: false
      suppress-change-event: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_VERSION

    execution: 
      sequence: 30
      event: Algo Change # 10425681259683924
      fire-when-event-result-is: True
      fire-on-initialization: true
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: set expression based on version =============
    id: 12543026482179904
    identification: 
      name: set expression based on version
      action: Set Value

    settings: 
      set-type: SQL Statement
      sql-statement: |
        select expression
        from ur_algo_versions
        where id = :P1050_VERSION
      items-to-submit: 
      - P1050_VERSION
      escape-special-characters: true
      suppress-change-event: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_EXPRESSION

    execution: 
      sequence: 40
      event: Algo Change # 10425681259683924
      fire-when-event-result-is: True
      fire-on-initialization: true
      stop-execution-on-error: true
      wait-for-result: true

    configuration: 
      build-option: Commented Out # 8557885664922129

- # ====== Dynamic Action: Change Version ======================
  id: 10426107550683929
  identification: 
    name: Change Version

  execution: 
    sequence: 130
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1050_VERSION

  client-side-condition: 
    type: Item is not null
    item: P1050_VERSION

  actions: 
  - # ====== Action: Set Expression ==============================
    id: 10426276160683930
    identification: 
      name: Set Expression
      action: Set Value

    settings: 
      set-type: SQL Statement
      sql-statement: |
        select expression
        from ur_algo_versions
        where id = :P1050_VERSION
      items-to-submit: 
      - P1050_VERSION
      escape-special-characters: true
      suppress-change-event: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_EXPRESSION

    execution: 
      sequence: 10
      event: Change Version # 10426107550683929
      fire-when-event-result-is: True
      fire-on-initialization: true
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: Execute JavaScript Code =====================
    id: 15570493939443201
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: load_data_expression();

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_ALGO_LIST
      - P1050_VERSION

    execution: 
      sequence: 20
      event: Change Version # 10426107550683929
      fire-when-event-result-is: True
      fire-on-initialization: true

  - # ====== Action: Set Value ===================================
    id: 19881185625504303
    identification: 
      action: Set Value

    settings: 
      set-type: JavaScript Expression
      javascript-expression: apex.item("P1050_ALGO_LIST").getValue()
      suppress-change-event: true

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_ALGO_LIST

    execution: 
      sequence: 30
      event: Change Version # 10426107550683929
      fire-when-event-result-is: True
      fire-on-initialization: true
      stop-execution-on-error: true
      wait-for-result: true

    configuration: 
      build-option: Commented Out # 8557885664922129

  - # ====== Action: Set Value ===================================
    id: 19881249725504304
    identification: 
      action: Set Value

    settings: 
      set-type: JavaScript Expression
      javascript-expression: apex.item("P1050_VERSION").getValue()
      suppress-change-event: true

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_VERSION

    execution: 
      sequence: 40
      event: Change Version # 10426107550683929
      fire-when-event-result-is: True
      fire-on-initialization: true
      stop-execution-on-error: true
      wait-for-result: true

    configuration: 
      build-option: Commented Out # 8557885664922129

  - # ====== Action: Submit Page =================================
    id: 19881331022504305
    identification: 
      action: Submit Page

    settings: 
      show-processing: true

    execution: 
      sequence: 50
      event: Change Version # 10426107550683929
      fire-when-event-result-is: True
      fire-on-initialization: false

    configuration: 
      build-option: Commented Out # 8557885664922129

- # ====== Dynamic Action: Loose Focus =========================
  id: 10426373210683931
  identification: 
    name: Loose Focus

  execution: 
    sequence: 140
    event-scope: Static
    type: Immediate

  when: 
    event: Lose Focus
    selection-type: Item(s)
    item(s): 
    - P1050_NAME

  client-side-condition: 
    type: Item != Value
    item: P1050_ALGO_LIST
    value: 00

  actions: 
  - # ====== Action: Execute Server-side Code ====================
    id: 10426419300683932
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        DECLARE
          l_status  VARCHAR2(10);
          l_message CLOB;
          l_icon    VARCHAR2(50);
          l_title   VARCHAR2(100);
        BEGIN
          Graph_SQL.proc_crud_json(
            p_mode    => 'U',
            p_table   => 'UR_ALGOS',
            p_payload => '{"ID":"'|| :P1050_ALGO_LIST || '","NAME":"' || :P1050_NAME || '"}',
            p_debug   => 'N',
            p_status  => l_status,
            p_message => l_message,
            p_icon    => l_icon,
            p_title   => l_title
          );
        
        --   DBMS_OUTPUT.put_line('Status: ' || l_status);
        --   DBMS_OUTPUT.put_line('Message (metadata JSON): ' || l_message);
        
        
        
          :P1050_ALERT_MESSAGE :=  '[{ "message":"' || l_message || '", "icon":"' || l_status || '"}]';  -- l_json;
        
        --   :P1001_ALERT_MESSAGE := 'This is default success message';
        
        END;
        
      items-to-submit: 
      - P1050_ALGO_LIST
      - P1050_NAME
      items-to-return: 
      - P1050_ALERT_MESSAGE
      suppress-change-event: false

    execution: 
      sequence: 20
      event: Loose Focus # 10426373210683931
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: Refresh =====================================
    id: 10426564902683933
    identification: 
      action: Refresh

    settings: 
      maintain-pagination: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_ALGO_LIST

    execution: 
      sequence: 50
      event: Loose Focus # 10426373210683931
      fire-when-event-result-is: True
      fire-on-initialization: false

    configuration: 
      build-option: Commented Out # 8557885664922129

  - # ====== Action: Disable Save Btn ============================
    id: 10426697974683934
    identification: 
      name: Disable Save Btn
      action: Disable

    affected-elements: 
      selection-type: Button
      button: Save # 11678270842603146

    execution: 
      sequence: 30
      event: Loose Focus # 10426373210683931
      fire-when-event-result-is: True
      fire-on-initialization: true

    client-side-condition: 
      type: Item is null
      item: P1050_NAME

    configuration: 
      build-option: Commented Out # 8557885664922129

- # ====== Dynamic Action: Loose Focus Description =============
  id: 10426887783683936
  identification: 
    name: Loose Focus Description

  execution: 
    sequence: 160
    event-scope: Static
    type: Immediate

  when: 
    event: Lose Focus
    selection-type: Item(s)
    item(s): 
    - P1050_DESCRIPTION

  actions: 
  - # ====== Action: Execute Server-side Code ====================
    id: 10426947902683937
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        DECLARE
          l_status  VARCHAR2(10);
          l_message CLOB;
          l_icon    VARCHAR2(50);
          l_title   VARCHAR2(100);
        BEGIN
          Graph_SQL.proc_crud_json(
            p_mode    => 'U',
            p_table   => 'UR_ALGOS',
            p_payload => '{"ID":"'|| :P1050_ALGO_LIST || '","DESCRIPTION":"' || :P1050_DESCRIPTION || '"}',
            p_debug   => 'N',
            p_status  => l_status,
            p_message => l_message,
            p_icon    => l_icon,
            p_title   => l_title
          );
        
        --   DBMS_OUTPUT.put_line('Status: ' || l_status);
        --   DBMS_OUTPUT.put_line('Message (metadata JSON): ' || l_message);
        
        
        
          :P1050_ALERT_MESSAGE :=  '{ "message":"' || l_message || '", "icon":"' || l_status || '"}';  -- l_json;
        
        --   :P1001_ALERT_MESSAGE := 'This is default success message';
        
        END;
        
      items-to-submit: 
      - P1050_ALGO_LIST
      - P1050_DESCRIPTION
      items-to-return: 
      - P1050_ALERT_MESSAGE
      suppress-change-event: false

    execution: 
      sequence: 10
      event: Loose Focus Description # 10426887783683936
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

    client-side-condition: 
      type: Item != Value
      item: P1050_ALGO_LIST
      value: 00

- # ====== Dynamic Action: Validation Btn Clicked ==============
  id: 10427117962683939
  identification: 
    name: Validation Btn Clicked

  execution: 
    sequence: 170
    event-scope: Static
    type: Immediate

  when: 
    event: Click
    selection-type: Button
    button: Validate # 11678311034603147

  actions: 
  - # ====== Action: Execute Server-side Code ====================
    id: 10427283372683940
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        DECLARE
          v_status VARCHAR2(1);
          v_message VARCHAR2(4000);
          v_expr VARCHAR2(4000);
          v_hotel_id VARCHAR2(32) := :P0_HOTEL_ID;
          l_json_clob clob := null;
        BEGIN
         -- v_expr := :P1050_EXPRESSION;
        v_expr := REPLACE(:P1050_EXPRESSION, '\_', '_');
          UR_UTILS.validate_expression(v_expr, 'V', v_hotel_id, v_status, v_message);
        
          UR_UTILS.add_alert(l_json_clob,v_message , v_status , null, null, l_json_clob);
        
          :P0_ALERT_MESSAGE := l_json_clob;
        
        END;
        
      items-to-submit: 
      - P0_HOTEL_ID
      - P1050_EXPRESSION
      items-to-return: 
      - P0_ALERT_MESSAGE
      suppress-change-event: false

    execution: 
      sequence: 10
      event: Validation Btn Clicked # 10427117962683939
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

- # ====== Dynamic Action: Btn Clicked =========================
  id: 10427749012683945
  identification: 
    name: Btn Clicked

  execution: 
    sequence: 180
    event-scope: Static
    type: Immediate

  when: 
    event: Click
    selection-type: Button
    button: Clear # 11678142393603145

  actions: 
  - # ====== Action: Clear =======================================
    id: 10427894639683946
    identification: 
      action: Clear

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_EXPRESSION

    execution: 
      sequence: 10
      event: Btn Clicked # 10427749012683945
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Btn Clicked Delete ==================
  id: 10427928401683947
  identification: 
    name: Btn Clicked Delete

  execution: 
    sequence: 190
    event-scope: Static
    type: Immediate

  when: 
    event: Click
    selection-type: Button
    button: Delete # 11678496244603148

  actions: 
  - # ====== Action: Alert =======================================
    id: 10428164755683949
    identification: 
      action: Alert

    settings: 
      title: Button Definition Missing
      message: Button Definition Missing
      style: Default

    execution: 
      sequence: 20
      event: Btn Clicked Delete # 10427928401683947
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Algo Change - Define New ============
  id: 11818471751390448
  identification: 
    name: Algo Change - Define New

  execution: 
    sequence: 120
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1050_ALGO_LIST

  client-side-condition: 
    type: Item = Value
    item: P1050_ALGO_LIST
    value: 00

  actions: 
  - # ====== Action: Execute JavaScript Code =====================
    id: 17818690536450203
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: |
        // Find the main container for all filter regions
        const filterContainer = document.getElementById('filterContainer');
        
        // If the container exists, clear it completely
        if (filterContainer) {
            filterContainer.innerHTML = '';
        }
        
        // Add one new, empty filter region to start fresh
        addFilterRegion();
        
        // Optional but recommended: Clear the name and description fields
        apex.item("P1050_NAME").setValue('');
        apex.item("P1050_DESCRIPTION").setValue('');
        apex.item("P1050_VERSION").setValue('');

    execution: 
      sequence: 10
      event: Algo Change - Define New # 11818471751390448
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: New_3 ===============================
  id: 12462683776188339
  identification: 
    name: New_3

  execution: 
    sequence: 90
    event-scope: Static
    type: Immediate

  when: 
    event: Custom
    custom-event: showAlert
    selection-type: jQuery Selector
    jquery-selector: body

  actions: 
  - # ====== Action: Execute JavaScript Code =====================
    id: 12463195593188341
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: |
        var title = $v('P1050_ALERT_TITLE') || 'Notification';
        var message = $v('P1050_ALERT_MESSAGE');
        var icon  = $v('P1050_ALERT_ICON') || 'success';
        
        if(message){
          Swal.fire({
            position: 'top-end',
            icon: icon,
            title: title,
            text: message,
            showConfirmButton: false,
            timer: 2500
          });
          
          $s('P1050_ALERT_MESSAGE','');
        }

    execution: 
      sequence: 10
      event: New_3 # 12462683776188339
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Change_Hotel ========================
  id: 12463585561188342
  identification: 
    name: Change_Hotel

  execution: 
    sequence: 60
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1050_HOTEL_LIST

  actions: 
  - # ====== Action: Set Value ===================================
    id: 10425330707683921
    identification: 
      action: Set Value

    settings: 
      set-type: Static Assignment
      suppress-change-event: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P0_HOTEL_ID

    execution: 
      sequence: 10
      event: Change_Hotel # 12463585561188342
      fire-when-event-result-is: True
      fire-on-initialization: true
      stop-execution-on-error: true
      wait-for-result: true

    configuration: 
      build-option: Commented Out # 8557885664922129

  - # ====== Action: Execute JavaScript Code =====================
    id: 14723098467617504
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: |
        // Call our function, passing the value of the changed hotel LoV
        fetchAndApplyLovData(this.triggeringElement.value);
        
        // load_data_expression();
        

    execution: 
      sequence: 20
      event: Change_Hotel # 12463585561188342
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: New =================================
  id: 12463934040188343
  identification: 
    name: New

  execution: 
    sequence: 10
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1050_FILE_LOAD

  actions: 
  - # ====== Action: Submit Page =================================
    id: 12464487029188344
    identification: 
      action: Submit Page

    settings: 
      show-processing: true

    execution: 
      sequence: 20
      event: New # 12463934040188343
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: New_1 ===============================
  id: 12464898115188345
  identification: 
    name: New_1

  execution: 
    sequence: 20
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1050_TEMPLATE_LOV

  actions: 
  - # ====== Action: Execute Server-side Code ====================
    id: 12465394111188347
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        DECLARE
        BEGIN
          -- Insert the template
          INSERT INTO UR_TEMPLATES (
            KEY,
            NAME,
            TYPE,
            ACTIVE,
            DEFINITION,
            CREATED_BY,
            CREATED_ON,
            UPDATED_BY,
            UPDATED_ON
          ) VALUES (
            'EXP_TEMPLATE_'|| ROUND(
            (CAST(SYSTIMESTAMP AT TIME ZONE 'UTC' AS DATE) - DATE '1970-01-01') * 86400
          ),
            'Expense Template '|| ROUND(
            (CAST(SYSTIMESTAMP AT TIME ZONE 'UTC' AS DATE) - DATE '1970-01-01') * 86400
          ),
            'RMS',
            'Y',  -- or hardcode 'ADMIN'
            '[{"name":"EMPLOYEE_NAME","data-type":1,"data-type-len":100,"selector":"Employee Name","is-json":false},{"name":"EXPENSE_ID","data-type":2,"selector":"Expense Id","is-json":false},{"name":"EXP_TYPE","data-type":1,"data-type-len":50,"selector":"Exp Type","is-json":false},{"name":"PROJECT_NAME","data-type":1,"data-type-len":100,"selector":"Project Name","is-json":false},{"name":"EXPENSE_PURPOSE","data-type":1,"data-type-len":50,"selector":"Expense Purpose","is-json":false},{"name":"EXPENSE_DATE_FROM","data-type":3,"selector":"Expense Date From","format-mask":"DD\"-\"MON\"-\"RR","is-json":false},{"name":"EXPENSE_DATE_TO","data-type":3,"selector":"Expense Date To","format-mask":"DD\"-\"MON\"-\"RR","is-json":false},{"name":"STATUS","data-type":1,"data-type-len":50,"selector":"Status","is-json":false},{"name":"CURRENCY","data-type":1,"data-type-len":50,"selector":"Currency","is-json":false},{"name":"CLAIM_AMOUNT","data-type":2,"selector":"Claim Amount","is-json":false},{"name":"EXPENSE_ATTACHMENT","data-type":2,"selector":"Expense Attachment","is-json":false},{"name":"EXPENSE_COMMENT","data-type":1,"data-type-len":32767,"selector":"Expense Comment","is-json":false},{"name":"CREATED_BY","data-type":1,"data-type-len":50,"selector":"Created By","is-json":false},{"name":"CREATION_DATE","data-type":3,"selector":"Creation Date","format-mask":"YYYY\"-\"MM\"-\"DD\" \"HH24\":\"MI\":\"SS","is-json":false},{"name":"LAST_UPDATED_BY","data-type":1,"data-type-len":50,"selector":"Last Updated By","is-json":false},{"name":"LAST_UPDATE_DATE","data-type":3,"selector":"Last Update Date","format-mask":"YYYY\"-\"MM\"-\"DD\" \"HH24\":\"MI\":\"SS","is-json":false}]',
            '3AB2E656C7307FD1E063DD59000A5850',
            SYSTIMESTAMP,
                '3AB2E656C7307FD1E063DD59000A5850',
            SYSTIMESTAMP
          );
        END;
        

    execution: 
      sequence: 10
      event: New_1 # 12464898115188345
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

- # ====== Dynamic Action: Page_Load_DA ========================
  id: 12465711591188348
  identification: 
    name: Page_Load_DA

  execution: 
    sequence: 50
    event-scope: Static

  when: 
    event: Page Load

  actions: 
  - # ====== Action: Set Value ===================================
    id: 17818788825450204
    identification: 
      action: Set Value

    settings: 
      set-type: Static Assignment
      suppress-change-event: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_ALGO_LIST

    execution: 
      sequence: 10
      event: Page_Load_DA # 12465711591188348
      fire-when-event-result-is: True
      fire-on-initialization: true
      stop-execution-on-error: true
      wait-for-result: true

- # ====== Dynamic Action: Changed =============================
  id: 12466146845188349
  identification: 
    name: Changed

  execution: 
    sequence: 100
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1050_ALERT_MESSAGE

  actions: 
  - # ====== Action: Execute JavaScript Code =====================
    id: 12466693546188351
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: |
        var messagesJson = $v("P1050_ALERT_MESSAGE");  // get the string from hidden page item
        
        if (messagesJson) {
          try {
            // Try parsing the string
            var parsed = JSON.parse(messagesJson);
        
            // Check if parsed result is array or object
            if (Array.isArray(parsed)) {
              // It's an array - pass as is
              showAlertToastr(parsed);
            } else if (parsed && typeof parsed === 'object') {
              // Single object - pass it wrapped in array for consistency 
              showAlertToastr([parsed]);
            } else {
              // Parsed to something else (string/number) â€” just pass original string
              showAlertToastr(messagesJson);
            }
          } catch (e) {
            // Parsing failed â€” probably plain text, pass as is
            showAlertToastr(messagesJson);
          }
        }

    execution: 
      sequence: 10
      event: Changed # 12466146845188349
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Btn Click ===========================
  id: 12543111814179905
  identification: 
    name: Btn Click

  execution: 
    sequence: 150
    event-scope: Static
    type: Immediate

  when: 
    event: Click
    selection-type: Button
    button: Save # 11678270842603146

  client-side-condition: 
    type: Item is not null
    item: P1050_NAME

  actions: 
  - # ====== Action: Refresh =====================================
    id: 10427001032683938
    identification: 
      action: Refresh

    settings: 
      maintain-pagination: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_ALGO_LIST

    execution: 
      sequence: 20
      event: Btn Click # 12543111814179905
      fire-when-event-result-is: True
      fire-on-initialization: false

    configuration: 
      build-option: Commented Out # 8557885664922129

  - # ====== Action: Execute Server-side Code ====================
    id: 12543211388179906
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        DECLARE
          l_status   VARCHAR2(10);
          l_message  CLOB;
          l_icon     VARCHAR2(50);
          l_title    VARCHAR2(100);
          l_new_id   VARCHAR2(64) := NULL; -- HEX string for RAW
          l_payload  CLOB;
          l_json_clob CLOB := NULL;
        BEGIN
          -- 1. Insert into UR_ALGOS
            -- UR_UTILS.add_alert(l_json_clob,'Algo ID: ' || :P1050_ALGO_LIST || ' Epr: ' || :P1050_EXPRESSION , 'E' , null, null, l_json_clob);
          IF :P1050_ALGO_LIST = '00'
          THEN
          
              Graph_SQL.proc_crud_json(
                p_mode    => 'C',
                p_table   => 'UR_ALGOS',
                p_payload => '{"NAME":"'|| :P1050_NAME || '","HOTEL_ID":"' || :P0_HOTEL_ID || '","DESCRIPTION":"'|| :P1050_DESCRIPTION ||'"}',
                p_debug   => 'N',
                p_status  => l_status,
                p_message => l_message,
                p_icon    => l_icon,
                p_title   => l_title
              );
        
            --   :P1050_ALERT_MESSAGE :=  '{ "message":"' || l_message || '", "icon":"' || l_status || '"}'; 
              UR_UTILS.add_alert(l_json_clob,l_message , l_status , null, null, l_json_clob);
        
              if upper(l_status) = 'S'
              THEN
                -- Extract HEX ID from returned message
                  l_new_id := REGEXP_SUBSTR(
                                l_message,
                                'New ID *=([0-9A-F]{32})',
                                1, 1, NULL, 1
                              );
        
                  IF :P1050_EXPRESSION IS NOT NULL and l_new_id is not null 
                  THEN
                    l_payload := '{"ALGO_ID":"' || l_new_id || '","EXPRESSION":"' || :P1050_EXPRESSION || '"}';
                        --l_payload := '{"ALGO_ID":"' || l_new_id || '","EXPRESSION":"' || :P1050_EXPRESSION || '","VERSION":"' || :P1050_VERSION || '"}';
        
                    Graph_SQL.proc_crud_json(
                      p_mode    => 'C',
                      p_table   => 'UR_ALGO_VERSIONS',
                      p_payload => l_payload,
                      p_debug   => 'N',
                      p_status  => l_status,
                      p_message => l_message,
                      p_icon    => l_icon,
                      p_title   => l_title
                    );
        
                    -- :P1050_ALERT_MESSAGE :=  '[' || :P1050_ALERT_MESSAGE || ',{ "message":"' || l_message || '", "icon":"' || l_status || '"}]'; 
                    UR_UTILS.add_alert(l_json_clob,l_message , l_status , null, null, l_json_clob);
        
                  ELSif l_new_id is null THEN
        
                    -- :P1050_ALERT_MESSAGE :=   '[' || :P1050_ALERT_MESSAGE || ', {"message":"Issue with Algo creation, please check with IT Team", "icon":false}]'; 
                    UR_UTILS.add_alert(l_json_clob,l_message , l_status , null, null, l_json_clob);
                  END IF;
              END IF;
        
           ELSE 
           
              IF :P1050_EXPRESSION IS NOT NULL and rawtohex(:P1050_ALGO_LIST) is not null 
                  THEN
                    l_payload := '{"ALGO_ID":"' || :P1050_ALGO_LIST || '","EXPRESSION":"' || :P1050_EXPRESSION || '"}';
                    --l_payload := '{"ALGO_ID":"' || l_new_id || '","EXPRESSION":"' || :P1050_EXPRESSION || '","VERSION":"' || :P1050_VERSION || '"}';
                    Graph_SQL.proc_crud_json(
                      p_mode    => 'C',
                      p_table   => 'UR_ALGO_VERSIONS',
                      p_payload => l_payload,
                      p_debug   => 'N',
                      p_status  => l_status,
                      p_message => l_message,
                      p_icon    => l_icon,
                      p_title   => l_title
                    );
        
                     -- DBMS_OUTPUT.put_line('Inserted Algo Version with Expression=' || :P1050_EXPRESSION);
                    -- :P1050_ALERT_MESSAGE :=  '[' || :P1050_ALERT_MESSAGE || ',{ "message":"' || l_message || '", "icon":"' || l_status || '"}]'; 
                    UR_UTILS.add_alert(l_json_clob,l_message , l_status , null, null, l_json_clob);
                  ELSE 
        
                    -- :P1050_ALERT_MESSAGE :=  '[' || :P1050_ALERT_MESSAGE || ', {"message":"Issue with Algo creation, please check with IT Team", "icon":false}]';
                    UR_UTILS.add_alert(l_json_clob,l_message , l_status , null, null, l_json_clob);
               END IF;
        
           END IF;
           :P0_ALERT_MESSAGE := l_json_clob;
        END;
        
      items-to-submit: 
      - P1050_NAME
      - P1050_EXPRESSION
      - P1050_ALGO_LIST
      - P1050_DESCRIPTION
      items-to-return: 
      - P0_ALERT_MESSAGE
      suppress-change-event: false

    execution: 
      sequence: 10
      event: Btn Click # 12543111814179905
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

- # ====== Dynamic Action: Append Column =======================
  id: 12543491477179908
  identification: 
    name: Append Column

  execution: 
    sequence: 200
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1050_ATTRIBUTES

  actions: 
  - # ====== Action: Execute JavaScript Code =====================
    id: 12543565629179909
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: |
        /*(function(){
          var col = $v("P1050_ATTRIBUTES");
          if(!col) return;
        
          var exp = $v("P1050_EXPRESSION") || "";
          var newExp = exp ? (exp + " " + col) : col;
          $s("P1050_EXPRESSION", newExp);
        
          // clear the select so user can choose again if needed
          $s("P1050_ATTRIBUTES", "");
        })();*/
        
        (function(){
          var col = $v("P1050_ATTRIBUTES");
          if(!col) return;
          insertAtSavedPos("P1050_EXPRESSION", col);
          $s("P1050_ATTRIBUTES", "");
        })();
        
        

    execution: 
      sequence: 10
      event: Append Column # 12543491477179908
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Append Operator =====================
  id: 12543667889179910
  identification: 
    name: Append Operator

  execution: 
    sequence: 210
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1050_OPERATORS

  actions: 
  - # ====== Action: Execute JavaScript Code =====================
    id: 12543750835179911
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: |
        /*(function(){
          var op = $v("P1050_OPERATORS");
          if(!op) return;
        
          var exp = $v("P1050_EXPRESSION") || "";
        
          // helper: last non-empty token
          function lastToken(s){
            if(!s) return "";
            var arr = s.trim().split(/\s+/);
            for(var i=arr.length-1;i>=0;i--){
              if(arr[i] !== "") return arr[i];
            }
            return "";
          }
        
          // operator set for validation (keywords and comparison ops)
          var ops = ['AND','OR','NOT','=','!=','<>','>','<','>=','<=','LIKE','IN','BETWEEN'];
        
          function isOperator(tok){
            if(!tok) return false;
            // strip trailing commas/parens
            tok = tok.replace(/,$/,"").toUpperCase();
            return ops.indexOf(tok) !== -1;
          }
        
          var last = lastToken(exp);
          if(isOperator(last) && isOperator(op)){
            apex.message.alert("Invalid: cannot add two operators in a row.");
            $s("P1050_OPERATORS",""); // reset selection
            return;
          }
        
          var newExp = exp ? (exp + " " + op) : op;
          $s("P1050_EXPRESSION", newExp);
          $s("P1050_OPERATORS",""); // reset selection
        })();
        */
        (function(){
          var op = $v("P1050_OPERATORS");
          if(!op) return;
        
          var exp = $v("P1050_EXPRESSION") || "";
          var lastToken = exp.trim().split(/\s+/).pop() || "";
          var operators = ["AND","OR","NOT","=","!=","<>",">","<",">=","<=","LIKE","IN","+","-","*","/"];
        
          if (operators.includes(lastToken) && operators.includes(op)) {
            apex.message.alert("Two operators in a row are not allowed.");
            $s("P1050_OPERATORS", "");
            return;
          }
        
          insertAtSavedPos("P1050_EXPRESSION", op);
          $s("P1050_OPERATORS", "");
        })();
        

    execution: 
      sequence: 10
      event: Append Operator # 12543667889179910
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Fixed Lead Time =====================
  id: 12882910530327116
  identification: 
    name: Fixed Lead Time

  execution: 
    sequence: 220
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1050_LEAD_TIME_TYPE

  client-side-condition: 
    type: Item != Value
    item: P1050_LEAD_TIME_TYPE
    value: F

  configuration: 
    build-option: Commented Out # 8557885664922129

  actions: 
  - # ====== Action: Show ========================================
    id: 12883052847327117
    identification: 
      action: Show

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_LEAD_TIME_TYPE

    execution: 
      sequence: 10
      event: Fixed Lead Time # 12882910530327116
      fire-when-event-result-is: True
      fire-on-initialization: true

  - # ====== Action: Show ========================================
    id: 12883112647327118
    identification: 
      action: Show

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_LEAD_TIME_FROM
      - P1050_LEAD_TIME_TO

    execution: 
      sequence: 10
      event: Fixed Lead Time # 12882910530327116
      fire-when-event-result-is: False
      fire-on-initialization: true

  - # ====== Action: Hide ========================================
    id: 12883264228327119
    identification: 
      action: Hide

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_LEAD_TIME_FROM
      - P1050_LEAD_TIME_TO

    execution: 
      sequence: 20
      event: Fixed Lead Time # 12882910530327116
      fire-when-event-result-is: True
      fire-on-initialization: true

  - # ====== Action: Hide ========================================
    id: 12883382200327120
    identification: 
      action: Hide

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_LEAD_TIME

    execution: 
      sequence: 20
      event: Fixed Lead Time # 12882910530327116
      fire-when-event-result-is: False
      fire-on-initialization: true

- # ====== Dynamic Action: Change Stay Window ==================
  id: 13905483070313919
  identification: 
    name: Change Stay Window

  execution: 
    sequence: 230
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1050_STAY_WINDOW_CHECK

  client-side-condition: 
    type: Item = Value
    item: P1050_STAY_WINDOW_CHECK
    value: Y

  actions: 
  - # ====== Action: Execute Server-side Code ====================
    id: 13905521335313920
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        declare
            json clob := NULL;
        begin
            UR_UTILS.ADD_ALERT(JSON, :P1050_STAY_WINDOW_CHECK,'S',NULL,NULL,JSON);
            :P0_ALERT_MESSAGE := json;
        end;
      items-to-submit: 
      - P1050_STAY_WINDOW_CHECK
      items-to-return: 
      - P0_ALERT_MESSAGE
      suppress-change-event: false

    execution: 
      sequence: 10
      event: Change Stay Window # 13905483070313919
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

    configuration: 
      build-option: Commented Out # 8557885664922129

  - # ====== Action: Show ========================================
    id: 13905746283313922
    identification: 
      action: Show

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_STAY_W_TO
      - P1050_STAY_W_FROM

    execution: 
      sequence: 20
      event: Change Stay Window # 13905483070313919
      fire-when-event-result-is: True
      fire-on-initialization: true

  - # ====== Action: Hide ========================================
    id: 13905887898313923
    identification: 
      action: Hide

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_STAY_W_FROM
      - P1050_STAY_W_TO

    execution: 
      sequence: 10
      event: Change Stay Window # 13905483070313919
      fire-when-event-result-is: False
      fire-on-initialization: true

- # ====== Dynamic Action: Change Lead Time ====================
  id: 13905909550313924
  identification: 
    name: Change Lead Time

  execution: 
    sequence: 240
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1050_LEAD_TIME_CHECK

  client-side-condition: 
    type: Item = Value
    item: P1050_LEAD_TIME_CHECK
    value: Y

  actions: 
  - # ====== Action: Show ========================================
    id: 13906091028313925
    identification: 
      action: Show

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_LEAD_T_TYPE

    execution: 
      sequence: 10
      event: Change Lead Time # 13905909550313924
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Hide ========================================
    id: 13906467168313929
    identification: 
      action: Hide

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_LEAD_T_FROM
      - P1050_LEAD_T_TYPE
      - P1050_LEAD_T_TO
      - P1050_LEAD_T_TIME

    execution: 
      sequence: 10
      event: Change Lead Time # 13905909550313924
      fire-when-event-result-is: False
      fire-on-initialization: true

- # ====== Dynamic Action: Change Lead Time Type ===============
  id: 13906171192313926
  identification: 
    name: Change Lead Time Type

  execution: 
    sequence: 250
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1050_LEAD_T_TYPE

  client-side-condition: 
    type: Item = Value
    item: P1050_LEAD_T_TYPE
    value: F

  actions: 
  - # ====== Action: Show ========================================
    id: 13906213069313927
    identification: 
      action: Show

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_LEAD_T_FROM
      - P1050_LEAD_T_TO

    execution: 
      sequence: 10
      event: Change Lead Time Type # 13906171192313926
      fire-when-event-result-is: True
      fire-on-initialization: true

  - # ====== Action: Hide ========================================
    id: 13906325630313928
    identification: 
      action: Hide

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_LEAD_T_TO
      - P1050_LEAD_T_FROM

    execution: 
      sequence: 10
      event: Change Lead Time Type # 13906171192313926
      fire-when-event-result-is: False
      fire-on-initialization: true

  - # ====== Action: Hide ========================================
    id: 13906580635313930
    identification: 
      action: Hide

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_LEAD_T_TIME

    execution: 
      sequence: 20
      event: Change Lead Time Type # 13906171192313926
      fire-when-event-result-is: True
      fire-on-initialization: true

  - # ====== Action: Show ========================================
    id: 13906691669313931
    identification: 
      action: Show

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_LEAD_T_TIME

    execution: 
      sequence: 20
      event: Change Lead Time Type # 13906171192313926
      fire-when-event-result-is: False
      fire-on-initialization: true

- # ====== Dynamic Action: Change DoW ==========================
  id: 13906965295313934
  identification: 
    name: Change DoW

  execution: 
    sequence: 260
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1050_DOW_CHECK

  client-side-condition: 
    type: Item = Value
    item: P1050_DOW_CHECK
    value: Y

  actions: 
  - # ====== Action: Show ========================================
    id: 13907029943313935
    identification: 
      action: Show

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_DOW_DAYS

    execution: 
      sequence: 10
      event: Change DoW # 13906965295313934
      fire-when-event-result-is: True
      fire-on-initialization: true

  - # ====== Action: Hide ========================================
    id: 13907189274313936
    identification: 
      action: Hide

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_DOW_DAYS

    execution: 
      sequence: 10
      event: Change DoW # 13906965295313934
      fire-when-event-result-is: False
      fire-on-initialization: true

- # ====== Dynamic Action: Changed Min Rate ====================
  id: 13907442097313939
  identification: 
    name: Changed Min Rate

  execution: 
    sequence: 270
    event-scope: Static
    type: Immediate

  when: 
    event: Change
    selection-type: Item(s)
    item(s): 
    - P1050_MIN_RATE_CHECK

  client-side-condition: 
    type: Item = Value
    item: P1050_MIN_RATE_CHECK
    value: Y

  actions: 
  - # ====== Action: Show ========================================
    id: 13907588108313940
    identification: 
      action: Show

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_MIN_RATE

    execution: 
      sequence: 10
      event: Changed Min Rate # 13907442097313939
      fire-when-event-result-is: True
      fire-on-initialization: true

  - # ====== Action: Hide ========================================
    id: 13907635208313941
    identification: 
      action: Hide

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P1050_MIN_RATE

    execution: 
      sequence: 10
      event: Changed Min Rate # 13907442097313939
      fire-when-event-result-is: False
      fire-on-initialization: true

- # ====== Dynamic Action: Click ===============================
  id: 18156988420285635
  identification: 
    name: Click

  execution: 
    sequence: 280
    event-scope: Static
    type: Immediate

  when: 
    event: Click
    selection-type: Button
    button: Duplicate_Strategy # 18156679423285632

  actions: 
  - # ====== Action: Execute Server-side Code ====================
    id: 18157097997285636
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        DECLARE
          -- Original variables
          l_status    VARCHAR2(10);
          l_message   CLOB;
          l_icon      VARCHAR2(50);
          l_title     VARCHAR2(100);
          l_new_id    VARCHAR2(64) := NULL; -- HEX string for RAW
          l_payload   CLOB;
          l_json_clob CLOB := NULL;
          l_hotel_id  VARCHAR2(64) := NULL;
        
          -- Variables for duplication logic
          l_timestamp_str   VARCHAR2(50);
          l_source_expression CLOB;
          l_new_name        VARCHAR2(4000);
          l_new_desc        VARCHAR2(4000);
        BEGIN
        UR_UTILS.add_alert(l_json_clob, 'HOTEL_ID:'|| :P1050_HOTEL_LIST || ' ALGO ID:' || :P1050_ALGO_LIST || ' Version ID:' || :P1050_VERSION, 'E', null, null, l_json_clob);
          -- 1. Check for required page items to perform a duplication
          IF :P1050_ALGO_LIST IS NULL OR :P1050_ALGO_LIST = '00' THEN
             UR_UTILS.add_alert(l_json_clob, 'Please select an existing strategy to duplicate.', 'E', null, null, l_json_clob);
             :P0_ALERT_MESSAGE := l_json_clob;
             RETURN;
          END IF;
          
          IF :P1050_VERSION IS NULL THEN
             UR_UTILS.add_alert(l_json_clob, 'Please select a version to copy the expression from.', 'E', null, null, l_json_clob);
             :P0_ALERT_MESSAGE := l_json_clob;
             RETURN;
          END IF;
        
          BEGIN
            SELECT EXPRESSION
            INTO   l_source_expression
            FROM   UR_ALGO_VERSIONS
            WHERE  ID = :P1050_VERSION; 
            select hotel_id
            into l_hotel_id
            from UR_ALGOS
            where id = :P1050_ALGO_LIST;
          EXCEPTION
            WHEN NO_DATA_FOUND THEN
              UR_UTILS.add_alert(l_json_clob, 'Could not find the selected source version to copy.', 'E', null, null, l_json_clob);
              :P0_ALERT_MESSAGE := l_json_clob;
              RETURN;
            WHEN OTHERS THEN
              UR_UTILS.add_alert(l_json_clob, 'Error fetching source expression: ' || SQLERRM, 'E', null, null, l_json_clob);
              :P0_ALERT_MESSAGE := l_json_clob;
              RETURN;
          END;
        
          -- 3. Define the new name and description with a timestamp
          l_timestamp_str := ' - Copied ' || TO_CHAR(SYSTIMESTAMP, 'YYYY-MM-DD HH24:MI:SS');
          l_new_name := :P1050_NAME || l_timestamp_str;
          if :P1050_DESCRIPTION is not null
          then
            l_new_desc := :P1050_DESCRIPTION || l_timestamp_str;
          else
            l_new_desc := NULL;
          END IF;
        
          l_payload := '{"NAME":"'|| l_new_name ||'",
                        "HOTEL_ID":"'|| :P0_HOTEL_ID ||'",
                        "DESCRIPTION":"'|| l_new_desc ||'"}';
          UR_UTILS.add_alert(l_json_clob, 'l_Payload:'|| l_payload, 'E', null, null, l_json_clob);
          
          Graph_SQL.proc_crud_json(
            p_mode    => 'C',
            p_table   => 'UR_ALGOS',
            p_payload => l_payload,
            p_debug   => 'N',
            p_status  => l_status,
            p_message => l_message,
            p_icon    => l_icon,
            p_title   => l_title
          );
          
          UR_UTILS.add_alert(l_json_clob, l_message, l_status, null, null, l_json_clob);
        
         
          IF upper(l_status) = 'S' THEN
        
            l_new_id := REGEXP_SUBSTR(
                          l_message,
                          'New ID *=([0-9A-F]{32})',
                          1, 1, NULL, 1
                        );
        
            IF l_new_id IS NOT NULL THEN
              -- 6. Create the new Algo Version record in UR_ALGO_VERSIONS
        
              l_payload := '{"ALGO_ID":"'|| l_new_id ||'", 
                        "EXPRESSION":"'|| l_source_expression ||'"}';
                UR_UTILS.add_alert(l_json_clob, 'l_Payload:'|| l_payload, 'E', null, null, l_json_clob);
              Graph_SQL.proc_crud_json(
                p_mode    => 'C',
                p_table   => 'UR_ALGO_VERSIONS',
                p_payload => l_payload,
                p_debug   => 'N',
                p_status  => l_status,
                p_message => l_message,
                p_icon    => l_icon,
                p_title   => l_title
              );
              
              UR_UTILS.add_alert(l_json_clob, l_message, l_status, null, null, l_json_clob);
        
            ELSE
              -- This means Algo creation said 'S' but we couldn't parse the new ID
              UR_UTILS.add_alert(l_json_clob, 'Algo copy created, but failed to extract new ID. Version was not copied.', 'E', null, null, l_json_clob);
            END IF;
          
          END IF; -- End of Algo creation success check
        
          :P0_ALERT_MESSAGE := l_json_clob;
        
        END;
      items-to-submit: 
      - P1050_VERSION
      - P1050_ALGO_LIST
      - P1050_NAME
      - P1050_DESCRIPTION
      - P1050_HOTEL_LIST
      items-to-return: 
      - P0_ALERT_MESSAGE
      suppress-change-event: false

    execution: 
      sequence: 10
      event: Click # 18156988420285635
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

processes: 
- # ====== Process: New ========================================
  id: 12461841137188336
  identification: 
    name: New
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      DECLARE
        v_profile_clob CLOB;
        v_records NUMBER;
        v_columns CLOB;
      
        -- Variables for parsing v_columns JSON
        CURSOR cur_columns IS
          SELECT jt.name, jt.data_type
            FROM JSON_TABLE(
                   v_columns,
                   '$[*]'
                   COLUMNS (
                     name VARCHAR2(100) PATH '$.name',
                     data_type VARCHAR2(20) PATH '$."data-type"'
                   )
                 ) jt;
      
      BEGIN
        -- Create or truncate APEX collection before processing
        IF apex_collection.collection_exists('UR_FILE_DATA_PROFILES') THEN
          apex_collection.delete_collection('UR_FILE_DATA_PROFILES');
        END IF;
        
        apex_collection.create_collection('UR_FILE_DATA_PROFILES');
      
        FOR r IN (
          SELECT ID, APPLICATION_ID, NAME, FILENAME, MIME_TYPE, CREATED_ON, BLOB_CONTENT
            FROM APEX_APPLICATION_TEMP_FILES
           WHERE NAME = :P1050_FILE_LOAD
        ) LOOP
          INSERT INTO temp_BLOB (
            ID,
            APPLICATION_ID,
            NAME,
            FILENAME,
            MIME_TYPE,
            CREATED_ON,
            BLOB_CONTENT
          ) VALUES (
            r.ID,
            r.APPLICATION_ID,
            r.NAME,
            r.FILENAME,
            r.MIME_TYPE,
            r.CREATED_ON,
            r.BLOB_CONTENT
          );
        END LOOP;
      
        FOR rec IN (
          SELECT ID, BLOB_CONTENT, filename, name
            FROM temp_BLOB
           WHERE profile IS NULL -- only parse if profile not yet loaded
        ) LOOP
          -- Call APEX_DATA_PARSER.GET_FILE_PROFILE on the blob content
          SELECT apex_data_parser.discover(
                   p_content => rec.BLOB_CONTENT,
                   p_file_name => rec.filename
                 )
            INTO v_profile_clob
            FROM dual;
      
          -- Extract "parsed-rows"
          SELECT TO_NUMBER(JSON_VALUE(v_profile_clob, '$."parsed-rows"'))
            INTO v_records
            FROM dual;
      
          -- Extract filtered columns with mapped data types
          SELECT TO_CLOB(
                   JSON_ARRAYAGG(
                     JSON_OBJECT(
                       'name' VALUE jt.name,
                       'data-type' VALUE CASE jt.data_type
                                          WHEN 1 THEN 'TEXT'
                                          WHEN 2 THEN 'NUMBER'
                                          WHEN 3 THEN 'DATE'
                                          ELSE 'TEXT'
                                        END
                     )
                   )
                 )
            INTO v_columns
            FROM JSON_TABLE(v_profile_clob, '$."columns"[*]'
                   COLUMNS (
                     name       VARCHAR2(100) PATH '$.name',
                     data_type  NUMBER       PATH '$."data-type"'
                   )
                ) jt;
      
          -- Insert each column into APEX collection
          FOR col IN cur_columns LOOP
            apex_collection.add_member(
              p_collection_name => 'UR_FILE_DATA_PROFILES',
              p_c001            => col.name,
              p_c002            => col.data_type
            );
          END LOOP;
      
          -- Update temp_BLOB table
          UPDATE temp_BLOB
             SET profile = v_profile_clob,
                 records = v_records,
                 columns = v_columns
           WHERE ID = rec.ID;
        END LOOP;
      
        COMMIT;
      END;

  execution: 
    sequence: 10
    point: After Submit
    run-process: Once Per Page Visit (default)

  error: 
    display-location: Inline in Notification

  configuration: 
    build-option: Commented Out # 8557885664922129

- # ====== Process: New_1 ======================================
  id: 12462262366188338
  identification: 
    name: New_1
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      DECLARE
        l_json CLOB;
      BEGIN
        l_json := UR_utils.get_collection_json('UR_FILE_DATA_PROFILES');
      
        INSERT INTO UR_TEMPLATES (
          KEY,
          NAME,
          TYPE,
          ACTIVE,
          DEFINITION,
          CREATED_BY,
          CREATED_ON,
          UPDATED_BY,
          UPDATED_ON
        ) VALUES (
          UPPER(
            SUBSTR(
              REGEXP_REPLACE(
                REGEXP_REPLACE(
                  REGEXP_REPLACE(
                    TRIM(:P1050_TEMPLATE_NAME),
                    '^[^A-Za-z0-9]+|[^A-Za-z0-9]+$', ''
                  ),
                  '[^A-Za-z0-9]+', '_'
                ),
                '_+', '_'
              ),
              1, 110
            )
          ),
          :P1050_TEMPLATE_NAME,
          :P1050_TEMPLATE_TYPE,
          'Y',  -- or hardcode 'ADMIN'
          l_json,
          '3AB2E656C7307FD1E063DD59000A5850',
          SYSTIMESTAMP,
          '3AB2E656C7307FD1E063DD59000A5850',
          SYSTIMESTAMP
        );
      
        apex_debug.message('Debug info: ' || l_json);
        
        apex_pwa.send_push_notification (
          p_application_id => 103,
          p_user_name      => 'VKANT',
          p_title          => 'Template Created Successfully.',
          p_body           => 'Order #123456 will arrive within 3 days.' );
      
      --   :P1050_AI_RESPONSE := 'Insert Successful';
      apex_pwa.push_queue;
      -- RETURN 'SUCCESS';
      
      --   apex.message.showToast(
      --     pMessage => 'Changes saved',
      --     pPosition => 'top-right',   -- or 'top-left', 'bottom-right', 'bottom-left'
      --     pDuration => 3000,          -- milliseconds; 0 means sticky until closed
      --     pCloseIcon => true,         -- show a close (x) icon
      --     pStyle => 'success'         -- values: 'success', 'warning', 'error', 'information'
      --   );
      
      -- apex_application.g_print_success_message := 'Record saved successfully!';
      
      EXCEPTION
        WHEN OTHERS THEN
          -- :P1050_AI_RESPONSE := 'Insert Failed: ' || SQLERRM;
          apex_debug.message('Insert Failed: ' || SQLERRM);
          -- RETURN 'Failed '||SQLERRM;
      END;

  execution: 
    sequence: 30
    point: Processing
    run-process: Once Per Page Visit (default)

  success-message: 
    success-message: Succesfully Done

  error: 
    error-message: Blah blah blah
    display-location: Inline in Notification

  configuration: 
    build-option: Commented Out # 8557885664922129

- # ====== Process: GET_LOV_DATA ===============================
  id: 14722934911617503
  identification: 
    name: GET_LOV_DATA
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      DECLARE
          l_hotel_id VARCHAR2(255) := apex_application.g_x01;
      BEGIN
          INSERT INTO debug_log(message) VALUES('--- GET_LOV_DATA for hotel_id: ' || l_hotel_id);
          
          apex_json.initialize_clob_output;
          apex_json.open_object; -- Start the main JSON object
      
          -- Fetch Attributes as {id, name} pairs
          apex_json.open_array('attributes');
          FOR rec IN (
              -- MODIFICATION: Select the ID from the attributes table
              SELECT
                  a.id,
                  a.name || ' (' || (SELECT name FROM ur_templates WHERE id = a.template_id) || '||' || a.ATTRIBUTE_QUALIFIER || ')' AS name
              FROM
                  ur_algo_attributes a, ur_templates t
              WHERE
                  a.hotel_id = l_hotel_id
                  and a.template_id = t.id
                  and t.active = 'Y'
              ORDER BY
                  name
          ) LOOP
              -- MODIFICATION: Write an object instead of a string for each record
              apex_json.open_object;
              apex_json.write('id', rec.id);
              apex_json.write('name', rec.name);
              apex_json.close_object;
          END LOOP;
          apex_json.close_array;
      
          -- Fetch Property Types as {id, name} pairs
          apex_json.open_array('propertyTypes');
          FOR rec IN (
              -- MODIFICATION: Select the ID from the templates table
              SELECT
                  id,
                  name
              FROM
                  ur_templates
              WHERE
                  hotel_id = l_hotel_id
                  AND type = 'RST'
                  and active = 'Y'
              ORDER BY
                  name
          ) LOOP
              -- MODIFICATION: Write an object instead of a string
              apex_json.open_object;
              apex_json.write('id', rec.id);
              apex_json.write('name', rec.name);
              apex_json.close_object;
          END LOOP;
          apex_json.close_array;
      
          -- Fetch Occupancy Attributes as {id, name} pairs
          apex_json.open_array('occupancyAttributes');
          FOR rec IN (
              -- MODIFICATION: Select the ID from the attributes table
              SELECT
                  a.id,
                  a.name || ' (' || t.name || ')' AS name
              FROM
                  ur_algo_attributes a,
                  ur_templates t
              WHERE
                  a.template_id = t.id
                  AND a.hotel_id = l_hotel_id
                  AND a.attribute_qualifier = 'OCCUPANCY'
                  and t.active = 'Y'
              ORDER BY
                  name
          ) LOOP
              -- MODIFICATION: Write an object instead of a string
              apex_json.open_object;
              apex_json.write('id', rec.id);
              apex_json.write('name', rec.name);
              apex_json.close_object;
          END LOOP;
          apex_json.close_array;
      
             -- Fetch Lead Time Attributes as {id, name} pairs
          apex_json.open_array('leadTimeAttributes');
          FOR rec IN (
              -- MODIFICATION: Select the ID from the attributes table
              SELECT
                  a.id,
                  a.name || ' (' || t.name || ')' AS name
              FROM
                  ur_algo_attributes a,
                  ur_templates t
              WHERE
                  a.template_id = t.id
                  AND a.hotel_id = l_hotel_id
                  AND a.attribute_qualifier = 'BOOKING_DATE'
              ORDER BY
                  name
          ) LOOP
              -- MODIFICATION: Write an object instead of a string
              apex_json.open_object;
              apex_json.write('id', rec.id);
              apex_json.write('name', rec.name);
              apex_json.close_object;
          END LOOP;
          apex_json.close_array;
          
          apex_json.close_object; -- Close the main JSON object
      
          -- Set the response header and print the generated JSON
          owa_util.mime_header('application/json', TRUE);
          htp.p(apex_json.get_clob_output);
          
          -- Free the resources used by the writer
          apex_json.free_output;
      
      EXCEPTION
          WHEN OTHERS THEN
              -- Always free resources, even if an error occurs
              apex_json.free_output; 
              owa_util.mime_header('application/json', TRUE);
              htp.p('{"error":"Could not fetch LoV data. SQLERRM: ' || apex_escape.js_literal(sqlerrm) || '"}');
      END;

  execution: 
    sequence: 10
    point: Ajax Callback
    run-process: Once Per Page Visit (default)

- # ====== Process: SAVE_ALGORITHM_DATA ========================
  id: 16205839859926305
  identification: 
    name: SAVE_ALGORITHM_DATA
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      DECLARE
          -- Read the standard parameters
          l_mode         VARCHAR2(1)      := apex_application.g_x01;
          l_algo_id_str  VARCHAR2(255)    := apex_application.g_x02;
          l_algo_name    VARCHAR2(255)    := apex_application.g_x03;
          l_algo_desc    VARCHAR2(4000)   := apex_application.g_x04;
          l_hotel_id_str VARCHAR2(255)    := apex_application.g_x05;
      
          -- Declare variables for processing
          l_json_payload CLOB;
          l_new_algo_id  ur_algos.id%TYPE; -- This is RAW(16)
          l_new_algo_version_id ur_algos.id%TYPE;
      BEGIN
          -- Rebuild the CLOB from the f01 array (This logic is correct and remains)
          dbms_lob.createtemporary(lob_loc => l_json_payload, cache => TRUE);
          FOR i IN 1..apex_application.g_f01.count LOOP
              dbms_lob.append(dest_lob => l_json_payload, src_lob => apex_application.g_f01(i));
          END LOOP;
      
          -- Initialize JSON output
          apex_json.open_object;
      
          -- CASE 1: Create a new Algorithm (Mode 'I')
          IF l_mode = 'I' THEN
              INSERT INTO ur_algos (name, description, hotel_id)
              VALUES (l_algo_name, l_algo_desc, HEXTORAW(l_hotel_id_str))
              RETURNING id INTO l_new_algo_id;
      
              INSERT INTO ur_algo_versions (algo_id, expression)
              VALUES (l_new_algo_id, l_json_payload)
              RETURNING ID INTO l_new_algo_version_id;
      
              apex_json.write('success', true);
              apex_json.write('message', 'New strategy and version created successfully!');
              apex_json.write('newAlgoId', RAWTOHEX(l_new_algo_id));
              -- apex_json.write('newAlgoName', l_algo_name);
              -- apex_json.write('newAlgoDescription', l_algo_desc);
              -- apex_json.write('newAlgoVersion', RAWTOHEX(l_new_algo_version_id));
      
          -- CASE 2: Create a new Version for an existing Algorithm (Mode 'U')
          ELSIF l_mode = 'U' THEN
              INSERT INTO ur_algo_versions (algo_id, expression)
              VALUES (HEXTORAW(l_algo_id_str), l_json_payload);
      
              apex_json.write('success', true);
              apex_json.write('message', 'New version saved successfully!');
              apex_json.write('newAlgoId', l_algo_id_str);
          
          ELSE
              apex_json.write('success', false);
              apex_json.write('message', 'Invalid operation mode specified.');
          END IF;
      
          apex_json.close_object;
          
          -- Free the temporary LOB
          dbms_lob.freetemporary(lob_loc => l_json_payload);
      
      EXCEPTION
          WHEN OTHERS THEN
              -- Ensure LOB is freed even on error
              IF dbms_lob.istemporary(l_json_payload) = 1 THEN
                  dbms_lob.freetemporary(lob_loc => l_json_payload);
              END IF;
      
              -- APEX automatically handles freeing JSON output on error.
              -- We just need to construct the error response.
              apex_json.open_object;
              apex_json.write('success', false);
              apex_json.write('message', 'Database error: ' || apex_escape.html(SQLERRM));
              apex_json.close_object;
      END;

  execution: 
    sequence: 20
    point: Ajax Callback
    run-process: Once Per Page Visit (default)

